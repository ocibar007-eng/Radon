/* eslint-disable */
/* This file is auto-generated by scripts/generate_formula_registry.ts */

import { z } from 'zod';

export const FORMULA_IDS = [
  "ABD-0001",
  "ABD-0002",
  "ABD-0003",
  "ABD-0004",
  "ABD-0005",
  "ABD-0006",
  "ABD-0007",
  "ABD-0008",
  "ABD-0009",
  "ABD-0010",
  "ABD-0011",
  "ABD-0012",
  "ABD-0013",
  "ABD-0014",
  "ABD-0015",
  "ABD-0016",
  "ABD-0017",
  "ABD-0018",
  "ABD-0019",
  "ABD-0020",
  "ABD-0021",
  "ABD-0022",
  "ABD-0023",
  "ABD-0024",
  "ABD-0025",
  "ABD-0026",
  "ABD-0027",
  "ABD-0028",
  "ABD-0029",
  "ABD-0030",
  "ABD-0031",
  "ABD-0032",
  "ABD-0033",
  "ABD-0034",
  "ABD-0035",
  "ABD-0036",
  "GIN-0001",
  "GIN-0002",
  "GIN-0003",
  "PEL-0001",
  "PEL-0002",
  "PEL-0003",
  "PEL-0004",
  "PEL-0005",
  "PEL-0006",
  "PEL-0007",
  "PEL-0008",
  "PEL-0009",
  "PEL-0010",
  "PEL-0011",
  "PEL-0012",
  "PEL-0013",
  "PEL-0014",
  "PEL-0015",
  "PEL-0016",
  "PEL-0017",
  "PEL-0018",
  "PEL-0019",
  "PEL-0020",
  "THX-0001",
  "THX-0002",
  "THX-0003",
  "THX-0004",
  "THX-0005",
  "THX-0006",
  "THX-0007",
  "THX-0008",
  "THX-0009",
  "THX-0010",
  "TIR-0001",
  "TIR-0002",
  "URO-0001",
  "URO-0002",
  "VASC-0001",
  "VASC-0002",
  "VASC-0003",
  "VASC-0004",
  "VASC-0005",
  "VASC-0006",
  "VASC-0007",
  "VASC-0008",
  "VASC-0009",
  "VASC-0010",
  "VASC-0011",
  "VASC-0012",
  "VASC-0013",
  "VASC-0014"
] as const;

export const FormulaIdSchema = z.enum(FORMULA_IDS);

export type FormulaId = z.infer<typeof FormulaIdSchema>;

export interface FormulaInputMeta {
  key: string;
  label: string;
  type: string;
  unit?: string;
  required: boolean;
  validRange?: string;
  notes?: string;
}

export interface FormulaMeta {
  displayName: string;
  category?: string;
  subcategory?: string;
  categoryCode?: string;
  subareaCode?: string;
  functionName?: string;
  tags: string[];
  synonyms: string[];
  searchTerms: string[];
  qaChecks: string[];
  evidence: {
    primary_source?: string;
    radiopaedia_link?: string;
    notes?: string;
    evidence_notes?: string;
  };
  inputs?: FormulaInputMeta[];
  outputUnits?: string[];
  todos?: string[];
}

export interface SubareaSynonyms {
  label: string;
  pt: string[];
  en: string[];
  hooks_pt: string[];
  hooks_en: string[];
  extra: string[];
}

export const SubareaSynonymsMap = {
  "A": {
    "label": "Vascular (arterial/venoso – geral)",
    "pt": [
      "estenose",
      "oclusão",
      "aneurisma",
      "dissecção",
      "trombose",
      "trombo",
      "embolia",
      "tromboembolismo",
      "perfusão",
      "fluxo",
      "velocidade",
      "gradiente",
      "calibre",
      "diâmetro",
      "área luminal",
      "área de secção",
      "índice",
      "razão",
      "critério",
      "cutoff",
      "limiar",
      "classificação",
      "reestenose",
      "endoleak",
      "pós-EVAR",
      "stent",
      "bypass",
      "trombose venosa profunda",
      "TVP",
      "trombose portal",
      "hipertensão portal",
      "shunt",
      "TIPS",
      "colaterais",
      "varizes",
      "congestão venosa."
    ],
    "en": [
      "stenosis",
      "occlusion",
      "aneurysm",
      "dissection",
      "thrombosis",
      "thrombus",
      "embolism",
      "thromboembolism",
      "perfusion",
      "flow",
      "velocity",
      "gradient",
      "caliber",
      "diameter",
      "lumen area",
      "cross-sectional area",
      "index",
      "ratio",
      "criteria",
      "cutoff",
      "threshold",
      "classification",
      "restenosis",
      "endoleak",
      "post-EVAR",
      "stent",
      "bypass",
      "deep vein thrombosis (DVT)",
      "portal vein thrombosis",
      "portal hypertension",
      "shunt",
      "TIPS",
      "collaterals",
      "varices",
      "venous congestion."
    ],
    "hooks_pt": [
      "“critérios por velocidade”",
      "“VPS”",
      "“VDF”",
      "“razão renal-aorta”",
      "“percentual de estenose”",
      "“estenose por área”",
      "“índice de pulsatilidade”",
      "“índice de resistência”",
      "“índice de congestão”."
    ],
    "hooks_en": [
      "“velocity criteria”",
      "“PSV”",
      "“EDV”",
      "“RAR renal-aortic ratio”",
      "“NASCET”",
      "“ECST”",
      "“peak systolic velocity”",
      "“diameter stenosis percentage formula”",
      "“area stenosis”",
      "“pulsatility index”",
      "“resistive index”",
      "“congestion index”"
    ],
    "extra": []
  },
  "A1": {
    "label": "Carótidas/vertebrais",
    "pt": [
      "NASCET",
      "ECST",
      "estenose carotídea",
      "placa",
      "critério Doppler carótida",
      "VPS",
      "VDF",
      "razão ICA/CCA",
      "estenose vertebral."
    ],
    "en": [
      "NASCET",
      "ECST",
      "carotid stenosis",
      "plaque",
      "carotid Doppler criteria",
      "PSV",
      "EDV",
      "ICA/CCA ratio",
      "vertebral stenosis."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": []
  },
  "A2": {
    "label": "Aorta (aneurisma/dissecção)",
    "pt": [
      "diâmetro aórtico",
      "crescimento anual",
      "taxa de crescimento",
      "aneurisma abdominal/torácico",
      "zona de aterrissagem",
      "endoleak tipo I–V",
      "índice de tortuosidade",
      "ângulo do colo."
    ],
    "en": [
      "aortic diameter",
      "annual growth",
      "growth rate",
      "AAA",
      "TAA",
      "landing zone",
      "endoleak type I–V",
      "tortuosity index",
      "neck angulation."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": []
  },
  "A3": {
    "label": "Artérias renais/mesentéricas/periféricas",
    "pt": [
      "estenose artéria renal",
      "critério Doppler renal",
      "RAR",
      "tempo de aceleração",
      "índice de aceleração",
      "tardus-parvus",
      "estenose mesentérica",
      "isquemia mesentérica",
      "membros inferiores",
      "ABI (se entrar)",
      "critérios por velocidade."
    ],
    "en": [
      "renal artery stenosis",
      "renal Doppler criteria",
      "RAR",
      "acceleration time",
      "acceleration index",
      "tardus-parvus",
      "mesenteric stenosis",
      "mesenteric ischemia",
      "lower limb arterial",
      "velocity criteria."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": []
  },
  "A4": {
    "label": "Veias (TVP/portal/hepática/IVC)",
    "pt": [
      "TVP",
      "compressibilidade",
      "trombose portal",
      "fluxo portal hepatopetal/hepatofugal",
      "veias hepáticas",
      "índice de congestão portal",
      "índice de colapsabilidade da VCI."
    ],
    "en": [
      "DVT",
      "compressibility",
      "portal vein thrombosis",
      "hepatopetal/hepatofugal flow",
      "hepatic veins",
      "portal congestion index",
      "IVC collapsibility index."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": []
  },
  "B": {
    "label": "Tórax (TC/RX/US)",
    "pt": [
      "derrame pleural",
      "volume do derrame",
      "estimativa volumétrica",
      "atelectasia compressiva",
      "consolidação",
      "enfisema",
      "índice de enfisema",
      "LAA (área de baixa atenuação)",
      "densitometria",
      "TEP",
      "carga trombótica",
      "índice de obstrução",
      "RV/LV ratio",
      "tronco pulmonar",
      "PA:Aorta ratio",
      "hipertensão pulmonar",
      "edema pulmonar",
      "cardiomegalia",
      "CTR",
      "razão AP/diâmetro",
      "bronquiectasias",
      "escore de gravidade."
    ],
    "en": [
      "pleural effusion",
      "effusion volume",
      "volumetric estimation",
      "compressive atelectasis",
      "consolidation",
      "emphysema",
      "emphysema index",
      "LAA (low attenuation area)",
      "densitometry",
      "pulmonary embolism (PE)",
      "clot burden",
      "obstruction index",
      "RV/LV ratio",
      "main pulmonary artery",
      "PA:Aorta ratio",
      "pulmonary hypertension",
      "pulmonary edema",
      "cardiomegaly",
      "cardiothoracic ratio (CTR)",
      "AP diameter ratio",
      "bronchiectasis",
      "severity score."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“pleural effusion CT volume estimation formula”",
      "“interpleural distance method”",
      "“Goecke / Hazlinger” (às vezes aparece em estimativas; sempre validar)",
      "“CT pulmonary artery diameter cutoff pulmonary hypertension”",
      "“PA to aorta ratio threshold”",
      "“CT RV/LV ratio prognosis PE”",
      "“emphysema percentage -950 HU threshold”",
      "“low attenuation area percent formula”"
    ]
  },
  "C": {
    "label": "Abdome – Fígado / portal / VB",
    "pt": [
      "esteatose hepática",
      "índice hepatorrenal",
      "hepatorenal index",
      "atenuação fígado/baço",
      "razão fígado/baço",
      "fração de gordura",
      "Dixon",
      "PDFF",
      "elastografia (se tiver fórmula)",
      "hipertensão portal",
      "diâmetro da veia porta",
      "congestão portal",
      "varizes",
      "TIPS",
      "gradiente (quando descrito)",
      "LI-RADS crescimento limiar",
      "washout",
      "cápsula."
    ],
    "en": [
      "hepatic steatosis",
      "hepatorenal index (HRI)",
      "liver-to-kidney ratio",
      "liver-to-spleen attenuation ratio",
      "fat fraction",
      "Dixon",
      "PDFF",
      "elastography (if formula exists)",
      "portal hypertension",
      "portal vein diameter",
      "portal congestion",
      "varices",
      "TIPS",
      "gradient",
      "LI-RADS threshold growth",
      "washout",
      "capsule."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“hepatorenal index ultrasound formula”",
      "“liver spleen attenuation ratio CT cutoff steatosis”",
      "“PDFF equation MRI Dixon”",
      "“threshold growth LI-RADS definition”"
    ]
  },
  "D": {
    "label": "Pâncreas",
    "pt": [
      "pancreatite",
      "CT severity index",
      "modified CT severity index",
      "necrose percentual",
      "coleções",
      "ducto pancreático diâmetro cutoff",
      "gordura pancreática",
      "fração de gordura pancreática RM",
      "atrofia",
      "índice (se existir)",
      "pancreatite crônica critérios mensuráveis."
    ],
    "en": [
      "pancreatitis",
      "CT severity index",
      "modified CT severity index",
      "necrosis percent",
      "collections",
      "pancreatic duct diameter cutoff",
      "pancreatic fat",
      "pancreatic fat fraction MRI",
      "atrophy",
      "index (if exists)",
      "chronic pancreatitis measurable criteria."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“pancreatic fat fraction Dixon formula”",
      "“pancreatic duct diameter normal values CT MRI cutoff”",
      "“necrosis percentage scoring pancreatitis”"
    ]
  },
  "E": {
    "label": "Baço",
    "pt": [
      "volume esplênico",
      "índice esplênico",
      "esplenomegalia critérios",
      "relação baço/fígado",
      "congestão",
      "hipertensão portal",
      "trauma esplênico (escore se mensurável)",
      "densidade/atenuação."
    ],
    "en": [
      "splenic volume",
      "splenic index",
      "splenomegaly criteria",
      "spleen-to-liver ratio",
      "congestion",
      "portal hypertension",
      "splenic trauma score (if quantitative)",
      "attenuation."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“splenic index formula”",
      "“spleen volume ellipsoid formula CT”",
      "“normal spleen volume cutoff”"
    ]
  },
  "F": {
    "label": "Uro/Rim (inclui DRPAD)",
    "pt": [
      "Bosniak 2019",
      "nefrometria RENAL",
      "PADUA",
      "cistos",
      "volume renal total",
      "volume renal total ajustado pela altura (ht-TKV/ht-VRT)",
      "DRPAD/ADPKD",
      "Mayo imaging classification",
      "TKV",
      "eGFR (se usado em protocolo)",
      "hidronefrose diâmetro ântero-posterior",
      "estenose artéria renal Doppler",
      "RI renal transplante",
      "índice parenquimatoso",
      "razão córtico-medular (se existir)."
    ],
    "en": [
      "Bosniak 2019",
      "RENAL nephrometry",
      "PADUA",
      "cysts",
      "total kidney volume (TKV)",
      "height-adjusted TKV (ht-TKV)",
      "ADPKD",
      "Mayo imaging classification",
      "hydronephrosis anteroposterior diameter",
      "renal artery stenosis Doppler",
      "transplant renal resistive index",
      "parenchymal index",
      "corticomedullary ratio (if exists)."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“height adjusted total kidney volume ht-TKV mL/m”",
      "“Mayo imaging classification ADPKD htTKV age”",
      "“TKV ellipsoid formula MRI CT”",
      "“renal pelvis AP diameter cutoff adults”"
    ]
  },
  "G": {
    "label": "Adrenais",
    "pt": [
      "washout absoluto",
      "washout relativo",
      "adenoma",
      "HU sem contraste",
      "fase portal/tardia",
      "chemical shift",
      "índice de intensidade de sinal",
      "SII",
      "razão fora/fase",
      "razão adrenal/baço",
      "CSI ratio."
    ],
    "en": [
      "absolute washout",
      "relative washout",
      "adenoma",
      "unenhanced HU",
      "portal venous/delayed phase",
      "chemical shift",
      "signal intensity index (SII)",
      "opposed/in-phase ratio",
      "adrenal-to-spleen ratio",
      "CSI ratio."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“adrenal absolute washout formula”",
      "“relative washout equation adrenal”",
      "“signal intensity index chemical shift adrenal formula”",
      "“adrenal-to-spleen ratio opposed in-phase”"
    ]
  },
  "H": {
    "label": "Próstata e pelve masculina",
    "pt": [
      "volume prostático (elipsoide)",
      "densidade de PSA",
      "PI-RADS",
      "pós-radioterapia",
      "PI-RR",
      "pós-prostatectomia (recidiva local – critérios mensuráveis)",
      "ADC (se aplicável em paper; com cautela)",
      "relação lesão/zonas."
    ],
    "en": [
      "prostate volume (ellipsoid)",
      "PSA density",
      "PI-RADS",
      "post-radiotherapy",
      "PI-RR",
      "post-prostatectomy (local recurrence measurable criteria)",
      "ADC (paper-specific; careful)",
      "lesion-to-zone metrics."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“PI-RR prostate MRI recurrence score”",
      "“post-radiotherapy prostate MRI scoring system”",
      "“PSA density cutoff MRI”",
      "“prostate volume ellipsoid formula TRUS MRI”"
    ]
  },
  "I": {
    "label": "Gineco/Ob",
    "pt": [
      "O-RADS US",
      "O-RADS RM",
      "tamanho/crescimento",
      "biometria fetal",
      "CRL",
      "MSD",
      "Hadlock",
      "peso fetal estimado",
      "volume ovariano",
      "volume uterino",
      "índices Doppler uterino/umbilical (se entrar)",
      "PUL (se houver regra mensurável)."
    ],
    "en": [
      "O-RADS US",
      "O-RADS MRI",
      "size/growth",
      "fetal biometry",
      "CRL",
      "MSD",
      "Hadlock",
      "estimated fetal weight",
      "ovarian volume",
      "uterine volume",
      "uterine/umbilical Doppler indices."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“CRL gestational age equation”",
      "“MSD gestational age formula”",
      "“Hadlock EFW equation”",
      "“ovarian volume ellipsoid formula”"
    ]
  },
  "J": {
    "label": "Tireoide",
    "pt": [
      "TI-RADS ACR",
      "EU-TIRADS",
      "volume tireoidiano",
      "volume lobar",
      "critérios por pontos",
      "cutoffs por tamanho para PAAF."
    ],
    "en": [
      "ACR TI-RADS",
      "EU-TIRADS",
      "thyroid volume",
      "lobe volume",
      "point-based criteria",
      "FNA size thresholds."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“thyroid volume formula ellipsoid”",
      "“ACR TI-RADS FNA size cutoff”"
    ]
  },
  "K": {
    "label": "Doppler (geral e avançado por território)",
    "pt": [
      "índice de resistência (IR/RI)",
      "índice de pulsatilidade (IP/PI)",
      "razão sistólica (S/D)",
      "velocidade sistólica de pico (VPS/PSV)",
      "velocidade diastólica final (VDF/EDV)",
      "razão PSV (ICA/CCA)",
      "RAR renal-aorta",
      "tempo de aceleração (AT)",
      "índice de aceleração (AI)",
      "congestão portal (congestion index)",
      "VCI colapsabilidade",
      "fluxo hepatopetal/hepatofugal",
      "onda trifásica/bifásica (se mensurável)",
      "TIPS velocidades."
    ],
    "en": [
      "resistive index (RI)",
      "pulsatility index (PI)",
      "systolic/diastolic ratio (S/D)",
      "peak systolic velocity (PSV)",
      "end-diastolic velocity (EDV)",
      "PSV ratios (ICA/CCA)",
      "renal-aortic ratio (RAR)",
      "acceleration time (AT)",
      "acceleration index (AI)",
      "portal congestion index",
      "IVC collapsibility",
      "hepatopetal/hepatofugal",
      "triphasic/biphasic waveform (if measurable)",
      "TIPS velocity thresholds."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": [
      "“portal vein congestion index Doppler formula”",
      "“IVC collapsibility index equation”",
      "“TIPS Doppler velocity criteria threshold”",
      "“renal transplant resistive index cutoff prognosis”"
    ]
  },
  "L": {
    "label": "“Clássicos de plantão” (quantificação universal)",
    "pt": [
      "fórmula do elipsoide",
      "ABC/2",
      "variação percentual",
      "taxa de crescimento anual",
      "densidade (HU)",
      "razão estrutura/referência",
      "normalização por altura/SC",
      "estimativa de volume por segmentos",
      "área/volume por ROI",
      "atenuação média",
      "desvio padrão",
      "limiar -950 HU (enfisema)",
      "-190 a -30 HU (gordura; contexto)",
      "etc."
    ],
    "en": [
      "ellipsoid formula",
      "ABC/2",
      "percent change",
      "annual growth rate",
      "density (HU)",
      "structure/reference ratio",
      "height/BSA normalization",
      "ROI-based area/volume",
      "mean attenuation",
      "standard deviation",
      "-950 HU threshold (emphysema)",
      "-190 to -30 HU fat (context)."
    ],
    "hooks_pt": [],
    "hooks_en": [],
    "extra": []
  }
} as const satisfies Record<string, SubareaSynonyms>;

export const FormulaFunctionNameMap = {
  "ABD-0001": "calculate_hepatorenal_index",
  "ABD-0002": "classify_renal_cyst_bosniak_2019",
  "ABD-0003": "calculate_renal_nephrometry_score",
  "ABD-0004": "calculate_height_adjusted_tkv",
  "ABD-0005": "calculate_adrenal_absolute_washout",
  "ABD-0006": "calculate_adrenal_signal_intensity_index",
  "ABD-0007": "calculate_lirads_threshold_growth",
  "ABD-0008": "calculate_modified_ct_severity_index",
  "ABD-0009": "measure_pancreatic_duct_diameter",
  "ABD-0010": "calculate_splenic_volume_ellipsoid",
  "ABD-0011": null,
  "ABD-0012": null,
  "ABD-0013": null,
  "ABD-0014": null,
  "ABD-0015": null,
  "ABD-0016": "measure_bile_duct_diameter",
  "ABD-0017": "measure_gallbladder_wall_thickness",
  "ABD-0018": "grade_hepatic_steatosis_ultrasound",
  "ABD-0019": "grade_pancreatic_echogenicity",
  "ABD-0020": "calculate_psoas_muscle_index",
  "ABD-0021": "measure_visceral_fat_area",
  "ABD-0022": "calculate_aorta_calcification_score",
  "ABD-0023": "measure_bowel_wall_thickness",
  "ABD-0024": "grade_mesenteric_fat_stranding",
  "ABD-0025": "calculate_hepatic_artery_ri",
  "ABD-0026": "classify_hepatic_vein_doppler",
  "ABD-0027": "measure_renal_artery_psv",
  "ABD-0028": "measure_renal_artery_edv",
  "ABD-0029": "calculate_renal_transplant_ri",
  "ABD-0030": "measure_adrenal_size",
  "ABD-0031": "calculate_adrenal_lipid_index",
  "ABD-0032": "calculate_splenic_artery_ri",
  "ABD-0033": "classify_spleen_doppler_flow",
  "ABD-0034": "measure_bile_duct_stone_diameter",
  "ABD-0035": "grade_hepatic_steatosis_ct",
  "ABD-0036": "calculate_stone_skin_distance_mean",
  "GIN-0001": "calculate_hadlock_efw",
  "GIN-0002": "calculate_ovarian_volume_ellipsoid",
  "GIN-0003": "classify_ovarian_lesion_orads_us",
  "PEL-0001": "calculate_prostate_psa_density",
  "PEL-0002": "calculate_transition_zone_psa_density",
  "PEL-0003": "measure_endometrial_thickness",
  "PEL-0004": "calculate_uterine_fibroid_volume",
  "PEL-0005": "measure_adenomyosis_junctional_zone",
  "PEL-0006": "measure_bladder_wall_thickness",
  "PEL-0007": "measure_post_void_residual_volume",
  "PEL-0008": "measure_rectal_wall_thickness",
  "PEL-0009": "classify_rectal_cancer_tnm",
  "PEL-0010": "measure_circumferential_resection_margin",
  "PEL-0011": "diagnose_ovarian_torsion",
  "PEL-0012": "assess_ovarian_reserve_amh",
  "PEL-0013": "diagnose_extraprostatic_extension",
  "PEL-0014": "diagnose_seminal_vesicle_invasion",
  "PEL-0015": "estimate_gleason_score_mri",
  "PEL-0016": "grade_prostate_cancer_gleason",
  "PEL-0017": "measure_uterine_artery_doppler",
  "PEL-0018": "calculate_bladder_outlet_obstruction_index",
  "PEL-0019": "measure_rectal_cancer_depth",
  "PEL-0020": "classify_lymph_node_staging",
  "THX-0001": "calculate_pleural_effusion_volume_ct",
  "THX-0002": "calculate_rv_lv_ratio",
  "THX-0003": "calculate_pa_aorta_ratio",
  "THX-0004": "classify_nodule_fleischner_2017",
  "THX-0005": "calculate_emphysema_index_laa",
  "THX-0006": "calculate_pesi_score",
  "THX-0007": null,
  "THX-0008": null,
  "THX-0009": null,
  "THX-0010": null,
  "TIR-0001": "classify_thyroid_nodule_tirads",
  "TIR-0002": "calculate_thyroid_volume_ellipsoid",
  "URO-0001": "calculate_prostate_volume_ellipsoid",
  "URO-0002": "classify_prostate_pirads_v2_1",
  "VASC-0001": "calculate_resistive_index",
  "VASC-0002": "calculate_pulsatility_index",
  "VASC-0003": "calculate_nascet_stenosis",
  "VASC-0004": "calculate_ras_doppler_criteria",
  "VASC-0005": "calculate_aaa_growth_rate",
  "VASC-0006": "classify_aortic_dissection_stanford",
  "VASC-0007": "calculate_ivc_collapsibility_index",
  "VASC-0008": "calculate_portal_vein_congestion_index",
  "VASC-0009": "calculate_ecst_stenosis",
  "VASC-0010": "calculate_mesenteric_stenosis_doppler",
  "VASC-0011": "measure_carotid_intima_media_thickness",
  "VASC-0012": "diagnose_dvt_compression_criteria",
  "VASC-0013": "calculate_ankle_brachial_index",
  "VASC-0014": "measure_aortic_diameter",
} as const satisfies Record<FormulaId, string | null>;

export const FunctionNameToFormulaIdMap = {
  "assess_ovarian_reserve_amh": "PEL-0012",
  "calculate_aaa_growth_rate": "VASC-0005",
  "calculate_adrenal_absolute_washout": "ABD-0005",
  "calculate_adrenal_lipid_index": "ABD-0031",
  "calculate_adrenal_signal_intensity_index": "ABD-0006",
  "calculate_ankle_brachial_index": "VASC-0013",
  "calculate_aorta_calcification_score": "ABD-0022",
  "calculate_bladder_outlet_obstruction_index": "PEL-0018",
  "calculate_ecst_stenosis": "VASC-0009",
  "calculate_emphysema_index_laa": "THX-0005",
  "calculate_hadlock_efw": "GIN-0001",
  "calculate_height_adjusted_tkv": "ABD-0004",
  "calculate_hepatic_artery_ri": "ABD-0025",
  "calculate_hepatorenal_index": "ABD-0001",
  "calculate_ivc_collapsibility_index": "VASC-0007",
  "calculate_lirads_threshold_growth": "ABD-0007",
  "calculate_mesenteric_stenosis_doppler": "VASC-0010",
  "calculate_modified_ct_severity_index": "ABD-0008",
  "calculate_nascet_stenosis": "VASC-0003",
  "calculate_ovarian_volume_ellipsoid": "GIN-0002",
  "calculate_pa_aorta_ratio": "THX-0003",
  "calculate_pesi_score": "THX-0006",
  "calculate_pleural_effusion_volume_ct": "THX-0001",
  "calculate_portal_vein_congestion_index": "VASC-0008",
  "calculate_prostate_psa_density": "PEL-0001",
  "calculate_prostate_volume_ellipsoid": "URO-0001",
  "calculate_psoas_muscle_index": "ABD-0020",
  "calculate_pulsatility_index": "VASC-0002",
  "calculate_ras_doppler_criteria": "VASC-0004",
  "calculate_renal_nephrometry_score": "ABD-0003",
  "calculate_renal_transplant_ri": "ABD-0029",
  "calculate_resistive_index": "VASC-0001",
  "calculate_rv_lv_ratio": "THX-0002",
  "calculate_splenic_artery_ri": "ABD-0032",
  "calculate_splenic_volume_ellipsoid": "ABD-0010",
  "calculate_stone_skin_distance_mean": "ABD-0036",
  "calculate_thyroid_volume_ellipsoid": "TIR-0002",
  "calculate_transition_zone_psa_density": "PEL-0002",
  "calculate_uterine_fibroid_volume": "PEL-0004",
  "classify_aortic_dissection_stanford": "VASC-0006",
  "classify_hepatic_vein_doppler": "ABD-0026",
  "classify_lymph_node_staging": "PEL-0020",
  "classify_nodule_fleischner_2017": "THX-0004",
  "classify_ovarian_lesion_orads_us": "GIN-0003",
  "classify_prostate_pirads_v2_1": "URO-0002",
  "classify_rectal_cancer_tnm": "PEL-0009",
  "classify_renal_cyst_bosniak_2019": "ABD-0002",
  "classify_spleen_doppler_flow": "ABD-0033",
  "classify_thyroid_nodule_tirads": "TIR-0001",
  "diagnose_dvt_compression_criteria": "VASC-0012",
  "diagnose_extraprostatic_extension": "PEL-0013",
  "diagnose_ovarian_torsion": "PEL-0011",
  "diagnose_seminal_vesicle_invasion": "PEL-0014",
  "estimate_gleason_score_mri": "PEL-0015",
  "grade_hepatic_steatosis_ct": "ABD-0035",
  "grade_hepatic_steatosis_ultrasound": "ABD-0018",
  "grade_mesenteric_fat_stranding": "ABD-0024",
  "grade_pancreatic_echogenicity": "ABD-0019",
  "grade_prostate_cancer_gleason": "PEL-0016",
  "measure_adenomyosis_junctional_zone": "PEL-0005",
  "measure_adrenal_size": "ABD-0030",
  "measure_aortic_diameter": "VASC-0014",
  "measure_bile_duct_diameter": "ABD-0016",
  "measure_bile_duct_stone_diameter": "ABD-0034",
  "measure_bladder_wall_thickness": "PEL-0006",
  "measure_bowel_wall_thickness": "ABD-0023",
  "measure_carotid_intima_media_thickness": "VASC-0011",
  "measure_circumferential_resection_margin": "PEL-0010",
  "measure_endometrial_thickness": "PEL-0003",
  "measure_gallbladder_wall_thickness": "ABD-0017",
  "measure_pancreatic_duct_diameter": "ABD-0009",
  "measure_post_void_residual_volume": "PEL-0007",
  "measure_rectal_cancer_depth": "PEL-0019",
  "measure_rectal_wall_thickness": "PEL-0008",
  "measure_renal_artery_edv": "ABD-0028",
  "measure_renal_artery_psv": "ABD-0027",
  "measure_uterine_artery_doppler": "PEL-0017",
  "measure_visceral_fat_area": "ABD-0021",
} as const satisfies Record<string, FormulaId>;

export const FunctionNameCollisionMap = {

} as const satisfies Record<string, FormulaId[]>;

export const FormulaInputSchemaMap = {
  "ABD-0001": z.object({
  "atenuacao_figado": z.number().min(0).max(100),
  "atenuacao_rim": z.number().min(0).max(100),
}).passthrough(),
  "ABD-0002": z.object({
  "atenuacao_hu_portal": z.number().min(-20).max(200).optional(),
  "atenuacao_hu_pre": z.number().min(-20).max(200).optional(),
  "calcificacao": z.boolean().optional(),
  "componentes_solidos": z.boolean().optional(),
  "fluido_simples": z.boolean().optional(),
  "hiperintenso_t1_heterogeneo_fs": z.boolean().optional(),
  "hiperintenso_t1_marcado": z.boolean().optional(),
  "hiperintenso_t2_csf": z.boolean().optional(),
  "homogeneo": z.boolean().optional(),
  "modalidade": z.string().optional(),
  "muito_pequeno_caracterizar": z.boolean().optional(),
  "nodulo_margem": z.string().optional(),
  "nodulo_realce": z.boolean().optional(),
  "nodulo_tamanho_mm": z.number().min(0).max(50).optional(),
  "numero_septos": z.number().min(0).max(10).optional(),
  "parede_espessura_mm": z.number().min(0).max(10).optional(),
  "parede_irregular": z.boolean().optional(),
  "parede_realce": z.boolean().optional(),
  "realce_hu": z.number().min(-20).max(100).optional(),
  "septos": z.boolean().optional(),
  "septos_espessura_mm": z.number().min(0).max(10).optional(),
  "septos_irregulares": z.boolean().optional(),
  "septos_realce": z.boolean().optional(),
  "tamanho_lesao_mm": z.number().min(0).max(200).optional(),
}).passthrough(),
  "ABD-0003": z.object({
  "anterior_posterior": z.any(),
  "exophytic_percent": z.number().min(0).max(100),
  "location_polar": z.any(),
  "nearness_mm": z.number().min(0).max(100),
  "radius_cm": z.number().min(0).max(10),
}).passthrough(),
  "ABD-0004": z.object({
  "altura": z.number().min(1).max(2.5),
  "volume_renal_total": z.number().min(0).max(5000),
}).passthrough(),
  "ABD-0005": z.object({
  "hu_nc": z.number().min(-100).max(100),
  "hu_portal": z.number().min(0).max(200),
  "hu_tardia": z.number().min(-50).max(150),
}).passthrough(),
  "ABD-0006": z.object({
  "sinal_in_phase": z.number().min(0).max(1000),
  "sinal_opposed_phase": z.number().min(0).max(1000),
}).passthrough(),
  "ABD-0007": z.object({
  "d_anterior": z.number().min(0).max(200),
  "d_atual": z.number().min(0).max(200),
  "intervalo_meses": z.number().min(0).max(24),
}).passthrough(),
  "ABD-0008": z.object({
  "grau_inflamacao": z.any(),
  "percentual_necrose": z.number().min(0).max(100),
}).passthrough(),
  "ABD-0009": z.object({
  "diametro_cabeca": z.number().min(0).max(10).optional(),
  "diametro_cauda": z.number().min(0).max(10).optional(),
  "diametro_corpo": z.number().min(0).max(10).optional(),
}).passthrough(),
  "ABD-0010": z.object({
  "comprimento": z.number().min(0).max(20),
  "espessura": z.number().min(0).max(15),
  "largura": z.number().min(0).max(15),
}).passthrough(),
  "ABD-0011": z.record(z.any()),
  "ABD-0012": z.record(z.any()),
  "ABD-0013": z.record(z.any()),
  "ABD-0014": z.record(z.any()),
  "ABD-0015": z.record(z.any()),
  "ABD-0016": z.object({
  "d_ducto_biliar": z.number().min(0).max(20),
}).passthrough(),
  "ABD-0017": z.object({
  "espessura_parede": z.number().min(0).max(10),
}).passthrough(),
  "ABD-0018": z.object({
  "atenuacao_posterior": z.any(),
  "ecogenicidade_figado": z.any(),
  "visibilidade_diafragma": z.any(),
}).passthrough(),
  "ABD-0019": z.object({
  "comparacao_figado": z.any(),
  "ecogenicidade_pancreas": z.any(),
}).passthrough(),
  "ABD-0020": z.object({
  "altura": z.number().min(1).max(2.5),
  "area_psoas": z.number().min(0).max(100),
}).passthrough(),
  "ABD-0021": z.object({
  "vfa_cm2": z.number().min(0).max(500),
}).passthrough(),
  "ABD-0022": z.object({
  "grau_calcificacao": z.any(),
}).passthrough(),
  "ABD-0023": z.object({
  "espessura_parede": z.number().min(0).max(10),
}).passthrough(),
  "ABD-0024": z.object({
  "grau_stranding": z.any(),
}).passthrough(),
  "ABD-0025": z.object({
  "edv": z.number().min(0).max(2),
  "psv": z.number().min(0).max(2),
}).passthrough(),
  "ABD-0026": z.object({
  "padr_o_fluxo": z.any(),
}).passthrough(),
  "ABD-0027": z.object({
  "psv_cm_s": z.number().min(0).max(400),
}).passthrough(),
  "ABD-0028": z.object({
  "edv_cm_s": z.number().min(0).max(200),
}).passthrough(),
  "ABD-0029": z.object({
  "edv": z.number().min(0).max(2),
  "psv": z.number().min(0).max(2),
}).passthrough(),
  "ABD-0030": z.object({
  "diametro_max": z.number().min(0).max(50),
}).passthrough(),
  "ABD-0031": z.object({
  "hu_nc": z.number().min(-100).max(100),
  "hu_portal": z.number().min(0).max(200),
}).passthrough(),
  "ABD-0032": z.object({
  "edv": z.number().min(0).max(2),
  "psv": z.number().min(0).max(2),
}).passthrough(),
  "ABD-0033": z.object({
  "direcao_fluxo": z.any(),
}).passthrough(),
  "ABD-0034": z.object({
  "d_calcul": z.number().min(0).max(50),
}).passthrough(),
  "ABD-0035": z.object({
  "hu_figado": z.number().min(-200).max(100),
  "hu_rim": z.number().min(0).max(100),
}).passthrough(),
  "ABD-0036": z.object({
  "ssd_1": z.number().min(0).max(300),
  "ssd_2": z.number().min(0).max(300),
  "ssd_3": z.number().min(0).max(300),
}).passthrough(),
  "GIN-0001": z.object({
  "ac": z.number().min(0).max(40),
  "bpd": z.number().min(0).max(12).optional(),
  "fl": z.number().min(0).max(10),
  "hc": z.number().min(0).max(40).optional(),
}).passthrough(),
  "GIN-0002": z.object({
  "comprimento": z.number().min(0).max(10),
  "espessura": z.number().min(0).max(10),
  "largura": z.number().min(0).max(10),
}).passthrough(),
  "GIN-0003": z.object({
  "achados_adicionais": z.string().optional(),
  "composicao": z.any(),
  "tamanho_mm": z.number().min(0).max(150),
  "vascularizacao": z.any(),
}).passthrough(),
  "PEL-0001": z.object({
  "psa": z.number().min(0).max(100),
  "volume_prostata": z.number().min(0).max(200),
}).passthrough(),
  "PEL-0002": z.object({
  "psa": z.number().min(0).max(100),
  "volume_tz": z.number().min(0).max(100),
}).passthrough(),
  "PEL-0003": z.object({
  "espessura_endometrio": z.number().min(0).max(30),
  "fase_ciclo": z.any(),
}).passthrough(),
  "PEL-0004": z.object({
  "altura": z.number().min(0).max(20),
  "comprimento": z.number().min(0).max(20),
  "largura": z.number().min(0).max(20),
}).passthrough(),
  "PEL-0005": z.object({
  "espessura_jz": z.number().min(0).max(30),
  "irregularidade_jz": z.boolean(),
}).passthrough(),
  "PEL-0006": z.object({
  "espessura_parede": z.number().min(0).max(10),
  "volume_bexiga": z.number().min(0).max(500),
}).passthrough(),
  "PEL-0007": z.object({
  "volume_residuo": z.number().min(0).max(500),
}).passthrough(),
  "PEL-0008": z.object({
  "espessura_parede": z.number().min(0).max(10),
}).passthrough(),
  "PEL-0009": z.object({
  "m_stage": z.any(),
  "n_stage": z.any(),
  "t_stage": z.any(),
}).passthrough(),
  "PEL-0010": z.object({
  "distancia_crm": z.number().min(0).max(50),
}).passthrough(),
  "PEL-0011": z.object({
  "doppler_fluxo": z.any(),
  "edema_estroma": z.boolean(),
  "volume_ovario": z.number().min(0).max(100),
}).passthrough(),
  "PEL-0012": z.object({
  "amh_ng_ml": z.number().min(0).max(15),
}).passthrough(),
  "PEL-0013": z.object({
  "epe_presente": z.boolean(),
  "lateralidade": z.any(),
}).passthrough(),
  "PEL-0014": z.object({
  "lateralidade": z.any(),
  "svi_presente": z.boolean(),
}).passthrough(),
  "PEL-0015": z.object({
  "dce_score": z.number().min(0).max(3),
  "dwi_score": z.number().min(1).max(5),
  "t2_score": z.number().min(1).max(5),
}).passthrough(),
  "PEL-0016": z.object({
  "gleason_primary": z.number().min(3).max(5),
  "gleason_secondary": z.number().min(3).max(5),
}).passthrough(),
  "PEL-0017": z.object({
  "notch_diastolico": z.boolean(),
  "ri_arteria_uterina": z.number().min(0).max(1),
}).passthrough(),
  "PEL-0018": z.object({
  "fluxo_urinario_max": z.number().min(0).max(50),
  "pressao_detrusor_max": z.number().min(0).max(200),
}).passthrough(),
  "PEL-0019": z.object({
  "profundidade_invasao": z.number().min(0).max(50),
}).passthrough(),
  "PEL-0020": z.object({
  "diametro_max": z.number().min(0).max(50),
  "numero_linfonodos": z.number().min(0).max(50),
}).passthrough(),
  "THX-0001": z.object({
  "comprimento_max": z.number().min(0).max(300),
  "profundidade_max": z.number().min(0).max(200),
}).passthrough(),
  "THX-0002": z.object({
  "d_lv": z.number().min(0).max(100),
  "d_rv": z.number().min(0).max(100),
}).passthrough(),
  "THX-0003": z.object({
  "d_ao": z.number().min(0).max(100),
  "d_pa": z.number().min(0).max(100),
}).passthrough(),
  "THX-0004": z.object({
  "risco_paciente": z.any(),
  "tamanho_mm": z.number().min(0).max(30),
  "tipo_nodulo": z.any(),
}).passthrough(),
  "THX-0005": z.object({
  "voxels_950_hu": z.number().min(0).max(1000000),
  "voxels_totais_pulmao": z.number().min(0).max(1000000),
}).passthrough(),
  "THX-0006": z.object({
  "consciencia_alterada": z.boolean(),
  "dpoc": z.boolean(),
  "fc": z.number().min(0).max(200),
  "fr": z.number().min(0).max(100),
  "icc": z.boolean(),
  "idade": z.number().min(0).max(120),
  "pas": z.number().min(0).max(300),
  "sao2": z.number().min(0).max(100),
  "sexo": z.any(),
  "temperatura": z.number().min(30).max(45),
}).passthrough(),
  "THX-0007": z.record(z.any()),
  "THX-0008": z.record(z.any()),
  "THX-0009": z.record(z.any()),
  "THX-0010": z.record(z.any()),
  "TIR-0001": z.object({
  "composicao": z.any(),
  "ecogenicidade": z.any(),
  "focos_ecogenicos": z.any(),
  "forma": z.any(),
  "margens": z.any(),
}).passthrough(),
  "TIR-0002": z.object({
  "h_ld": z.number().min(0).max(10),
  "h_rd": z.number().min(0).max(10),
  "l_ld": z.number().min(0).max(10),
  "l_rd": z.number().min(0).max(10),
  "v_istmo": z.number().min(0).max(5).optional(),
  "w_ld": z.number().min(0).max(10),
  "w_rd": z.number().min(0).max(10),
}).passthrough(),
  "URO-0001": z.object({
  "altura": z.number().min(0).max(10),
  "comprimento": z.number().min(0).max(10),
  "largura": z.number().min(0).max(10),
}).passthrough(),
  "URO-0002": z.object({
  "dce_score": z.number().min(0).max(3),
  "dwi_score": z.number().min(1).max(5),
  "localizacao": z.any(),
  "t2_score": z.number().min(1).max(5),
}).passthrough(),
  "VASC-0001": z.object({
  "edv": z.number().min(0).max(5),
  "psv": z.number().min(0).max(5),
}).passthrough(),
  "VASC-0002": z.object({
  "edv": z.number().min(0).max(5),
  "psv": z.number().min(0).max(5),
  "v_mean": z.number().min(0).max(5),
}).passthrough(),
  "VASC-0003": z.object({
  "d_distal": z.number().min(0).max(10),
  "d_stenosis": z.number().min(0).max(10),
}).passthrough(),
  "VASC-0004": z.object({
  "psv_aorta": z.number().min(0).max(200),
  "psv_renal": z.number().min(0).max(400),
}).passthrough(),
  "VASC-0005": z.object({
  "d_anterior": z.number().min(0).max(100),
  "d_atual": z.number().min(0).max(100),
  "intervalo_anos": z.number().min(0.1).max(10),
}).passthrough(),
  "VASC-0006": z.object({
  "envolve_ascendente": z.boolean(),
  "localizacao_lacera_o": z.any(),
}).passthrough(),
  "VASC-0007": z.object({
  "d_max_inspiracao": z.number().min(0).max(30),
  "d_min_expira_o": z.number().min(0).max(30),
}).passthrough(),
  "VASC-0008": z.object({
  "v_max_portal": z.number().min(0).max(50),
  "v_min_portal": z.number().min(0).max(50),
}).passthrough(),
  "VASC-0009": z.object({
  "d_estenose": z.number().min(0).max(10),
  "d_proximal": z.number().min(0).max(10),
}).passthrough(),
  "VASC-0010": z.object({
  "psv_celiaca": z.number().min(0).max(300).optional(),
  "psv_sma": z.number().min(0).max(400),
}).passthrough(),
  "VASC-0011": z.object({
  "imt_mm": z.number().min(0).max(3),
}).passthrough(),
  "VASC-0012": z.object({
  "compressibilidade": z.any(),
  "lado_contralateral": z.any(),
}).passthrough(),
  "VASC-0013": z.object({
  "p_braquial": z.number().min(0).max(300),
  "p_tornozelo": z.number().min(0).max(300),
}).passthrough(),
  "VASC-0014": z.object({
  "d_aorta": z.number().min(0).max(100),
  "localizacao": z.any(),
}).passthrough(),
} as const satisfies Record<FormulaId, z.ZodTypeAny>;

export const FormulaMetaMap = {
  "ABD-0001": {
    "displayName": "Hepatorenal Index",
    "category": "C - Abdome",
    "subcategory": "C1 - Fígado",
    "categoryCode": "C",
    "subareaCode": "C1",
    "functionName": "calculate_hepatorenal_index",
    "tags": [
      "#esteatose",
      "#fígado",
      "#ultrassom",
      "#índice",
      "#hepatorenal"
    ],
    "synonyms": [
      "Liver-to-kidney ratio",
      "HRI"
    ],
    "searchTerms": [
      "hepatorenal index",
      "HRI steatosis",
      "liver kidney ratio",
      "hepatic steatosis ultrasound",
      "fatty liver US"
    ],
    "qaChecks": [
      "Alertar se hri < 0 (erro)",
      "Validar ROI adequado (≥1 cm)",
      "Verificar se evita vasos",
      "Alertar se cirrose/fibrose presente (invalida índice)",
      "Alertar se ferro hepático presente (aumenta atenuação)"
    ],
    "evidence": {
      "primary_source": "Hamaguchi M et al. Severity ultrasonographic findings NAFLD. AJR. 2007;188(6):1490-1496.",
      "radiopaedia_link": "https://radiopaedia.org/articles/diffuse-hepatic-steatosis",
      "notes": "Índice US para quantificar esteatose. HRI >1.5 sugere esteatose >5%.",
      "evidence_notes": "Fonte primária: Hamaguchi M et al (AJR 2007). Índice US para quantificar esteatose."
    },
    "inputs": [
      {
        "key": "atenuacao_figado",
        "label": "atenuacao_figado",
        "type": "number",
        "unit": "dB/cm",
        "required": true,
        "validRange": "0-100",
        "notes": "Atenuação fígado medida em US"
      },
      {
        "key": "atenuacao_rim",
        "label": "atenuacao_rim",
        "type": "number",
        "unit": "dB/cm",
        "required": true,
        "validRange": "0-100",
        "notes": "Atenuação rim direito medida em US"
      }
    ],
    "outputUnits": [
      "ratio"
    ]
  },
  "ABD-0002": {
    "displayName": "Bosniak Classification 2019",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "classify_renal_cyst_bosniak_2019",
    "tags": [
      "#cisto",
      "#rim",
      "#Bosniak",
      "#classificação",
      "#malignidade"
    ],
    "synonyms": [
      "Bosniak 2019",
      "cystic renal mass classification"
    ],
    "searchTerms": [
      "Bosniak classification",
      "cystic renal mass",
      "Bosniak 2019",
      "renal cyst classification",
      "cyst malignancy risk"
    ],
    "qaChecks": [
      "Validar CT com contraste (NC + fases) quando aplicável",
      "Verificar realce ≥20 HU em CT",
      "Alertar se realce <20 HU (não significativo)",
      "Confirmar presença de septos (não confundir com artefato)",
      "Documentar localização exata (rim D/E, pólo)"
    ],
    "evidence": {
      "primary_source": "Bosniak MA et al. Bosniak Classification of Cystic Renal Masses, Version 2019. Radiology. 2019;292(2):475-488.",
      "radiopaedia_link": "https://radiopaedia.org/articles/bosniak-classification-of-cystic-renal-masses-version-2019",
      "notes": "Classificação Bosniak 2019 atualizada. Baseada em risco malignidade.",
      "evidence_notes": "Fonte primária: Silverman SG et al (Radiology 2019). Classificação atualizada para cistos renais."
    },
    "inputs": [
      {
        "key": "realce_hu",
        "label": "realce_HU",
        "type": "number",
        "unit": "HU",
        "required": false,
        "validRange": "-20-100",
        "notes": "Realce em unidades Hounsfield (≥20 HU = realce). Opcional se RM."
      },
      {
        "key": "componentes_solidos",
        "label": "componentes_solidos",
        "type": "boolean",
        "required": false,
        "notes": "Presença de componentes sólidos? (nódulo sólido)"
      },
      {
        "key": "septos",
        "label": "septos",
        "type": "boolean",
        "required": false,
        "notes": "Presença de septos?"
      },
      {
        "key": "calcificacao",
        "label": "calcificacao",
        "type": "boolean",
        "required": false,
        "notes": "Presença de calcificação?"
      },
      {
        "key": "numero_septos",
        "label": "numero_septos",
        "type": "number",
        "unit": "count",
        "required": false,
        "validRange": "0-10",
        "notes": "Número de septos (se presentes)"
      },
      {
        "key": "modalidade",
        "label": "modalidade",
        "type": "string",
        "required": false,
        "notes": "CT ou MRI"
      },
      {
        "key": "tamanho_lesao_mm",
        "label": "tamanho_lesao_mm",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-200",
        "notes": "Maior diâmetro da lesão"
      },
      {
        "key": "parede_espessura_mm",
        "label": "parede_espessura_mm",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-10",
        "notes": "Espessura máxima da parede"
      },
      {
        "key": "septos_espessura_mm",
        "label": "septos_espessura_mm",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-10",
        "notes": "Espessura máxima dos septos"
      },
      {
        "key": "parede_irregular",
        "label": "parede_irregular",
        "type": "boolean",
        "required": false,
        "notes": "Parede irregular?"
      },
      {
        "key": "septos_irregulares",
        "label": "septos_irregulares",
        "type": "boolean",
        "required": false,
        "notes": "Septos irregulares?"
      },
      {
        "key": "parede_realce",
        "label": "parede_realce",
        "type": "boolean",
        "required": false,
        "notes": "Realce de parede (RM/CT)"
      },
      {
        "key": "septos_realce",
        "label": "septos_realce",
        "type": "boolean",
        "required": false,
        "notes": "Realce de septos (RM/CT)"
      },
      {
        "key": "nodulo_realce",
        "label": "nodulo_realce",
        "type": "boolean",
        "required": false,
        "notes": "Realce de nódulo mural"
      },
      {
        "key": "nodulo_tamanho_mm",
        "label": "nodulo_tamanho_mm",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-50",
        "notes": "Maior dimensão do nódulo mural"
      },
      {
        "key": "nodulo_margem",
        "label": "nodulo_margem",
        "type": "string",
        "required": false,
        "notes": "Margem do nódulo (aguda/obtusa)"
      },
      {
        "key": "atenuacao_hu_pre",
        "label": "atenuacao_hu_pre",
        "type": "number",
        "unit": "HU",
        "required": false,
        "validRange": "-20-200",
        "notes": "Atenuação na fase pré-contraste (CT)"
      },
      {
        "key": "atenuacao_hu_portal",
        "label": "atenuacao_hu_portal",
        "type": "number",
        "unit": "HU",
        "required": false,
        "validRange": "-20-200",
        "notes": "Atenuação na fase portal (CT)"
      },
      {
        "key": "homogeneo",
        "label": "homogeneo",
        "type": "boolean",
        "required": false,
        "notes": "Lesão homogênea?"
      },
      {
        "key": "hiperintenso_t2_csf",
        "label": "hiperintenso_t2_csf",
        "type": "boolean",
        "required": false,
        "notes": "T2 muito hiperintenso (como LCR)"
      },
      {
        "key": "hiperintenso_t1_marcado",
        "label": "hiperintenso_t1_marcado",
        "type": "boolean",
        "required": false,
        "notes": "T1 muito hiperintenso (aprox. 2,5x parênquima)"
      },
      {
        "key": "hiperintenso_t1_heterogeneo_fs",
        "label": "hiperintenso_t1_heterogeneo_fs",
        "type": "boolean",
        "required": false,
        "notes": "T1 hiperintenso heterogêneo em fat-sat"
      },
      {
        "key": "muito_pequeno_caracterizar",
        "label": "muito_pequeno_caracterizar",
        "type": "boolean",
        "required": false,
        "notes": "Muito pequeno para caracterizar (TSTC)"
      },
      {
        "key": "fluido_simples",
        "label": "fluido_simples",
        "type": "boolean",
        "required": false,
        "notes": "Fluido simples (cisto simples)"
      }
    ]
  },
  "ABD-0003": {
    "displayName": "RENAL Nephrometry Score",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "calculate_renal_nephrometry_score",
    "tags": [
      "#rim",
      "#nefrometria",
      "#RENAL",
      "#complexidade",
      "#score"
    ],
    "synonyms": [
      "RENAL score",
      "nephrometry scoring"
    ],
    "searchTerms": [
      "RENAL nephrometry",
      "RENAL score",
      "renal mass complexity",
      "nephrometry scoring",
      "renal tumor assessment"
    ],
    "qaChecks": [
      "Validar medições em TC/RM",
      "Verificar localização exata lesão",
      "Confirmar distância sistema coletor",
      "Documentar percentual exofítico",
      "Alertar se lesão muito complexa (RENAL >12)"
    ],
    "evidence": {
      "primary_source": "Kutikov A, Uzzo RG. R.E.N.A.L. nephrometry score. J Urol. 2009;182(3):844-853.",
      "radiopaedia_link": "https://radiopaedia.org/articles/renal-nephrometry-scoring-system-2",
      "notes": "Score para estratificar complexidade anatômica massas renais. Guia decisão cirúrgica.",
      "evidence_notes": "Fonte primária: Kutikov A, Uzzo RG (J Urol 2009). Score para complexidade anatômica massas renais."
    },
    "inputs": [
      {
        "key": "radius_cm",
        "label": "radius_cm",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Maior diâmetro lesão"
      },
      {
        "key": "exophytic_percent",
        "label": "exophytic_percent",
        "type": "number",
        "unit": "\"%\"",
        "required": true,
        "validRange": "0-100",
        "notes": "Percentual exofítico (0-25% / 26-50% / 51-100%)"
      },
      {
        "key": "nearness_mm",
        "label": "nearness_mm",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Distância sistema coletor (mm)"
      },
      {
        "key": "anterior_posterior",
        "label": "anterior_posterior",
        "type": "enum",
        "required": true,
        "notes": "Localização (anterior/posterior/ambos)"
      },
      {
        "key": "location_polar",
        "label": "location_polar",
        "type": "enum",
        "required": true,
        "notes": "Localização polar (superior/meio/inferior)"
      }
    ],
    "outputUnits": [
      "points"
    ]
  },
  "ABD-0004": {
    "displayName": "Height-Adjusted TKV",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "calculate_height_adjusted_tkv",
    "tags": [
      "#DRPAD",
      "#rim",
      "#volume",
      "#altura-ajustado",
      "#ht-TKV"
    ],
    "synonyms": [
      "ht-TKV",
      "Mayo imaging classification",
      "ADPKD volume"
    ],
    "searchTerms": [
      "height adjusted TKV",
      "ht-TKV ADPKD",
      "total kidney volume",
      "Mayo classification",
      "ADPKD prognosis"
    ],
    "qaChecks": [
      "Validar segmentação renal correta",
      "Alertar se volume < 100 mL (possível erro)",
      "Alertar se volume > 3000 mL (possível erro)",
      "Validar altura entre 1.0-2.5 m",
      "Confirmar que volume é ambos rins (não unilateral)"
    ],
    "evidence": {
      "primary_source": "Irazabal MV et al. Imaging classification ADPKD. J Am Soc Nephrol. 2015;26(1):160-172.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adpkd-classification",
      "notes": "Classificação Mayo para DRPAD. Prediz progressão doença e necessidade diálise.",
      "evidence_notes": "Fonte primária: Irazabal MV et al (J Am Soc Nephrol 2015). Classificação Mayo para DRPAD."
    },
    "inputs": [
      {
        "key": "volume_renal_total",
        "label": "volume_renal_total",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-5000",
        "notes": "Volume renal total (ambos rins)"
      },
      {
        "key": "altura",
        "label": "altura",
        "type": "number",
        "unit": "m",
        "required": true,
        "validRange": "1.0-2.5",
        "notes": "Altura do paciente em metros"
      }
    ],
    "outputUnits": [
      "mL/m"
    ]
  },
  "ABD-0005": {
    "displayName": "Adrenal Absolute Washout",
    "category": "C - Abdome",
    "subcategory": "C3 - Adrenais",
    "categoryCode": "C",
    "subareaCode": "C3",
    "functionName": "calculate_adrenal_absolute_washout",
    "tags": [
      "#adrenal",
      "#washout",
      "#adenoma",
      "#TC",
      "#caracterização"
    ],
    "synonyms": [
      "Absolute washout",
      "AW"
    ],
    "searchTerms": [
      "adrenal washout",
      "absolute washout adenoma",
      "adrenal CT washout",
      "adenoma characterization",
      "adrenal mass washout"
    ],
    "qaChecks": [
      "Alertar se absolute_washout < 0 ou > 100 (erro)",
      "Validar ROI ≥1 cm",
      "Verificar se evita necrose/vasos",
      "Alertar se insuficiência renal (afeta clearance contraste)",
      "Confirmar protocolo TC correto (NC + portal + tardia)"
    ],
    "evidence": {
      "primary_source": "Caoili EM et al. Adrenal masses characterization. Radiology. 2002;222(3):629-633.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adrenal-washout",
      "notes": "Protocolo TC para caracterização adenoma. Washout >60% = adenoma com alta especificidade.",
      "evidence_notes": "Fonte primária: Caoili EM et al (Radiology 2002). Protocolo TC para caracterização adenoma."
    },
    "inputs": [
      {
        "key": "hu_nc",
        "label": "HU_nc",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "-100-100",
        "notes": "Atenuação fase NC (não contraste)"
      },
      {
        "key": "hu_portal",
        "label": "HU_portal",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "0-200",
        "notes": "Atenuação fase portal (60-90 seg)"
      },
      {
        "key": "hu_tardia",
        "label": "HU_tardia",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "-50-150",
        "notes": "Atenuação fase tardia (15 min)"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "ABD-0006": {
    "displayName": "Adrenal Signal Intensity Index",
    "category": "C - Abdome",
    "subcategory": "C3 - Adrenais",
    "categoryCode": "C",
    "subareaCode": "C3",
    "functionName": "calculate_adrenal_signal_intensity_index",
    "tags": [
      "#adrenal",
      "#chemical-shift",
      "#SII",
      "#RM",
      "#gordura"
    ],
    "synonyms": [
      "Chemical shift index",
      "CSI",
      "opposed/in-phase ratio"
    ],
    "searchTerms": [
      "signal intensity index adrenal",
      "chemical shift index",
      "CSI adenoma",
      "opposed in-phase ratio",
      "adrenal MRI"
    ],
    "qaChecks": [
      "Alertar se sii < 0 ou > 100 (erro)",
      "Validar sequências corretas (in-phase e opposed-phase)",
      "Verificar se ROI ≥1 cm",
      "Alertar se artefatos presentes",
      "Confirmar que é adenoma sem gordura (SII pode ser baixo)"
    ],
    "evidence": {
      "primary_source": "Halefoglu AM, Baskan O. Diffusion-weighted MR imaging adrenal masses. Diagn Interv Radiol. 2012;18(1):99-105.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adrenal-adenoma",
      "notes": "Índice RM para detectar gordura em adenomas. SII >16.5% = adenoma lipídico.",
      "evidence_notes": "Fonte primária: Halefoglu AM, Baskan O (Diagn Interv Radiol 2012). Índice RM para detectar gordura."
    },
    "inputs": [
      {
        "key": "sinal_in_phase",
        "label": "sinal_in_phase",
        "type": "number",
        "unit": "intensity",
        "required": true,
        "validRange": "0-1000",
        "notes": "Sinal in-phase (TE ~2.3 ms em 1.5T)"
      },
      {
        "key": "sinal_opposed_phase",
        "label": "sinal_opposed_phase",
        "type": "number",
        "unit": "intensity",
        "required": true,
        "validRange": "0-1000",
        "notes": "Sinal opposed-phase (TE ~4.6 ms em 1.5T)"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "ABD-0007": {
    "displayName": "LI-RADS Threshold Growth",
    "category": "C - Abdome",
    "subcategory": "C1 - Fígado",
    "categoryCode": "C",
    "subareaCode": "C1",
    "functionName": "calculate_lirads_threshold_growth",
    "tags": [
      "#HCC",
      "#fígado",
      "#LI-RADS",
      "#crescimento",
      "#limiar"
    ],
    "synonyms": [
      "Threshold growth",
      "LI-RADS major feature"
    ],
    "searchTerms": [
      "LI-RADS threshold growth",
      "HCC growth criteria",
      "nodule growth LI-RADS",
      "50% growth 6 months",
      "LI-RADS major feature"
    ],
    "qaChecks": [
      "Alertar se d_atual < d_anterior (regressão; verificar medições)",
      "Validar intervalo_meses > 0",
      "Verificar se medições em mesmo plano",
      "Alertar se intervalo > 6 meses (não qualifica como threshold)",
      "Confirmar que nódulo em cirrose (contexto LI-RADS)"
    ],
    "evidence": {
      "primary_source": "Chernyak V et al. Liver Imaging Reporting Data System v2018. Radiology. 2018;289(3):816-830.",
      "radiopaedia_link": "https://radiopaedia.org/articles/ctmri-li-rads",
      "notes": "LI-RADS v2018: ≥50% aumento diâmetro em ≤6 meses = major feature.",
      "evidence_notes": "Fonte primária: Chernyak V et al (Radiology 2018). Definição LI-RADS v2018 para crescimento."
    },
    "inputs": [
      {
        "key": "d_anterior",
        "label": "d_anterior",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-200",
        "notes": "Diâmetro nódulo anterior"
      },
      {
        "key": "d_atual",
        "label": "d_atual",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-200",
        "notes": "Diâmetro nódulo atual"
      },
      {
        "key": "intervalo_meses",
        "label": "intervalo_meses",
        "type": "number",
        "unit": "months",
        "required": true,
        "validRange": "0-24",
        "notes": "Intervalo entre exames (meses)"
      }
    ]
  },
  "ABD-0008": {
    "displayName": "Modified CT Severity Index",
    "category": "D - Pâncreas",
    "subcategory": "D1 - Pancreatite Aguda",
    "categoryCode": "D",
    "subareaCode": "D1",
    "functionName": "calculate_modified_ct_severity_index",
    "tags": [
      "#pancreatite",
      "#MCTSI",
      "#gravidade",
      "#TC",
      "#score"
    ],
    "synonyms": [
      "Mortele MCTSI",
      "modified CTSI"
    ],
    "searchTerms": [
      "modified CT severity index",
      "MCTSI pancreatitis",
      "Mortele score",
      "acute pancreatitis severity",
      "CT severity pancreatitis"
    ],
    "qaChecks": [
      "Validar grau_inflamacao correto (A-E)",
      "Verificar percentual_necrose entre 0-100",
      "Confirmar TC com contraste",
      "Alertar se pancreatite fulminante (mortalidade >30%)",
      "Documentar complicações (pseudocisto, abscessos)"
    ],
    "evidence": {
      "primary_source": "Mortele KJ et al. Modified Marshall score assessing severity acute pancreatitis. AJR. 2004;183(6):1519-1524.",
      "radiopaedia_link": "https://radiopaedia.org/articles/modified-ct-severity-index-pancreatitis",
      "notes": "Score para avaliar gravidade pancreatite aguda. Prediz mortalidade e complicações.",
      "evidence_notes": "Fonte primária: Mortele KJ et al (AJR 2004). Score para avaliar gravidade pancreatite."
    },
    "inputs": [
      {
        "key": "grau_inflamacao",
        "label": "grau_inflamacao",
        "type": "enum",
        "required": true,
        "notes": "Grau inflamação pancreática (Balthazar A-E)"
      },
      {
        "key": "percentual_necrose",
        "label": "percentual_necrose",
        "type": "number",
        "unit": "\"%\"",
        "required": true,
        "validRange": "0-100",
        "notes": "Percentual necrose pancreática"
      }
    ],
    "outputUnits": [
      "points"
    ]
  },
  "ABD-0009": {
    "displayName": "Pancreatic Duct Diameter",
    "category": "D - Pâncreas",
    "subcategory": "D2 - Pâncreas Crônico",
    "categoryCode": "D",
    "subareaCode": "D2",
    "functionName": "measure_pancreatic_duct_diameter",
    "tags": [
      "#pâncreas",
      "#ducto",
      "#diâmetro",
      "#medição",
      "#normal"
    ],
    "synonyms": [
      "Main pancreatic duct diameter",
      "MPD"
    ],
    "searchTerms": [
      "pancreatic duct diameter",
      "main pancreatic duct",
      "MPD normal values",
      "duct dilatation",
      "pancreatic duct measurement"
    ],
    "qaChecks": [
      "Alertar se diâmetro < 0.5 mm (possível erro)",
      "Alertar se diâmetro > 10 mm (possível erro ou dilatação massiva)",
      "Validar medições em eixo transversal",
      "Verificar se evita confluência",
      "Alertar se dilatação pós-prandial (fisiológica)"
    ],
    "evidence": {
      "primary_source": "Elgasim M et al. Pancreatic duct imaging aging. Endosc Ultrasound. 2023;12(2):118-125.",
      "radiopaedia_link": "https://radiopaedia.org/articles/pancreatic-duct-diameter",
      "notes": "Valores normais variam ligeiramente entre estudos (1-3.5 mm). RM (MRCP) mais sensível que TC.",
      "evidence_notes": "Fonte primária: Elgasim M et al (Endosc Ultrasound 2023). Valores normais duct pancreático."
    },
    "inputs": [
      {
        "key": "diametro_cabeca",
        "label": "diametro_cabeca",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-10",
        "notes": "Diâmetro ducto pancreático na cabeça"
      },
      {
        "key": "diametro_corpo",
        "label": "diametro_corpo",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-10",
        "notes": "Diâmetro ducto pancreático no corpo"
      },
      {
        "key": "diametro_cauda",
        "label": "diametro_cauda",
        "type": "number",
        "unit": "mm",
        "required": false,
        "validRange": "0-10",
        "notes": "Diâmetro ducto pancreático na cauda"
      }
    ]
  },
  "ABD-0010": {
    "displayName": "Splenic Volume Ellipsoid",
    "category": "E - Baço",
    "subcategory": "E1 - Volume Esplênico",
    "categoryCode": "E",
    "subareaCode": "E1",
    "functionName": "calculate_splenic_volume_ellipsoid",
    "tags": [
      "#baço",
      "#volume",
      "#elipsoide",
      "#esplenomegalia",
      "#fórmula"
    ],
    "synonyms": [
      "Spleen volume",
      "splenic index"
    ],
    "searchTerms": [
      "splenic volume",
      "spleen volume formula",
      "splenic index",
      "splenomegaly measurement",
      "ellipsoid formula spleen"
    ],
    "qaChecks": [
      "Alertar se volume < 50 mL (possível erro)",
      "Alertar se volume > 1000 mL (possível erro)",
      "Validar medições em três planos perpendiculares",
      "Verificar se fórmula elipsoide apropriada",
      "Alertar se baço muito irregular (fórmula menos acurada)"
    ],
    "evidence": {
      "primary_source": "Bezerra AS et al. Determination splenomegaly CT ultrasound volumetry. Eur J Radiol. 2004;53(2):268-274.",
      "radiopaedia_link": "https://radiopaedia.org/articles/splenomegaly",
      "notes": "Fórmula elipsoide validada. Volume >200 mL sugere esplenomegalia.",
      "evidence_notes": "Fonte primária: Bezerra AS et al (Eur J Radiol 2004). Fórmula elipsoide validada."
    },
    "inputs": [
      {
        "key": "comprimento",
        "label": "comprimento",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-20",
        "notes": "Comprimento baço (eixo longitudinal)"
      },
      {
        "key": "largura",
        "label": "largura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-15",
        "notes": "Largura baço (eixo transversal)"
      },
      {
        "key": "espessura",
        "label": "espessura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-15",
        "notes": "Espessura baço (eixo ântero-posterior)"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "ABD-0011": {
    "displayName": "Liver-to-Spleen Attenuation Ratio",
    "category": "C - Abdome",
    "subcategory": "C1 - Fígado",
    "categoryCode": "C",
    "subareaCode": "C1",
    "tags": [
      "#fígado",
      "#esteatose",
      "#razão",
      "#TC",
      "#atenuação"
    ],
    "synonyms": [
      "Liver/spleen ratio",
      "L/S ratio",
      "steatosis CT"
    ],
    "searchTerms": [
      "liver spleen attenuation ratio",
      "L/S ratio steatosis",
      "liver spleen CT",
      "hepatic steatosis CT"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Piekarski J et al (Radiology 1989). Razão para quantificar esteatose TC."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "ABD-0012": {
    "displayName": "Liver Fibrosis Elastography",
    "category": "C - Abdome",
    "subcategory": "C1 - Fígado",
    "categoryCode": "C",
    "subareaCode": "C1",
    "tags": [
      "#fígado",
      "#fibrose",
      "#elastografia",
      "#rigidez",
      "#US"
    ],
    "synonyms": [
      "Liver stiffness",
      "transient elastography",
      "FibroScan"
    ],
    "searchTerms": [
      "liver elastography",
      "liver stiffness",
      "transient elastography",
      "FibroScan",
      "hepatic fibrosis"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Castera L et al (Hepatology 2005). Elastografia para avaliar fibrose."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "ABD-0013": {
    "displayName": "Renal Resistive Index",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "tags": [
      "#rim",
      "#resistência",
      "#doppler",
      "#RI",
      "#transplante"
    ],
    "synonyms": [
      "Renal RI",
      "renal artery RI",
      "transplant RI"
    ],
    "searchTerms": [
      "renal resistive index",
      "renal RI",
      "transplant RI",
      "renal artery RI",
      "kidney resistance"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Radermecker RP et al (Nephrol Dial Transplant 2002). RI renal para avaliar função."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "ABD-0014": {
    "displayName": "Renal Pelvic AP Diameter",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "tags": [
      "#rim",
      "#pelve",
      "#hidronefrose",
      "#diâmetro",
      "#obstrução"
    ],
    "synonyms": [
      "Renal pelvis diameter",
      "pelvicalyceal dilatation",
      "hydronephrosis"
    ],
    "searchTerms": [
      "renal pelvis diameter",
      "hydronephrosis AP diameter",
      "pelvic dilatation",
      "renal pelvic measurement"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Shokeir AA (Curr Opin Support Palliat Care 2009). Critério para hidronefrose."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "ABD-0015": {
    "displayName": "Spleen-to-Liver Attenuation Ratio",
    "category": "C - Abdome",
    "subcategory": "C4 - Baço",
    "categoryCode": "C",
    "subareaCode": "C4",
    "tags": [
      "#baço",
      "#congestão",
      "#hipertensão-portal",
      "#razão",
      "#TC"
    ],
    "synonyms": [
      "Spleen/liver ratio",
      "splenic congestion"
    ],
    "searchTerms": [
      "spleen liver attenuation ratio",
      "S/L ratio",
      "splenic congestion",
      "portal hypertension CT"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Piekarski J et al (Radiology 1989). Razão para congestão esplênica."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "ABD-0016": {
    "displayName": "Bile Duct Diameter",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "measure_bile_duct_diameter",
    "tags": [
      "#ducto-biliar",
      "#medição",
      "#dilatação",
      "#obstrução",
      "#ultrassom"
    ],
    "synonyms": [
      "Common bile duct",
      "CBD",
      "diâmetro ducto biliar"
    ],
    "searchTerms": [
      "bile duct diameter",
      "common bile duct",
      "CBD measurement",
      "ductal dilatation",
      "biliary duct"
    ],
    "qaChecks": [
      "Alertar se d_ducto < 2 mm (possível erro)",
      "Alertar se d_ducto > 20 mm (possível erro)",
      "Validar medição em eixo transversal",
      "Verificar se não confunde com veia porta",
      "Considerar idade (aumenta ligeiramente com idade)"
    ],
    "evidence": {
      "primary_source": "Laing FC, Jacobs RP. Ultrasonic evaluation common bile duct. Radiology. 1981;139(1):161-165.",
      "radiopaedia_link": "https://radiopaedia.org/articles/common-bile-duct-diameter",
      "notes": "Valor normal <6 mm. Aumenta ligeiramente com idade (até 8 mm em >60 anos).",
      "evidence_notes": "Fonte primária: Laing FC et al (Radiology 1981). Valores normais CBD bem estabelecidos."
    },
    "inputs": [
      {
        "key": "d_ducto_biliar",
        "label": "d_ducto_biliar",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-20",
        "notes": "Diâmetro máximo ducto biliar"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "ABD-0017": {
    "displayName": "Gallbladder Wall Thickness",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "measure_gallbladder_wall_thickness",
    "tags": [
      "#vesícula",
      "#colecistite",
      "#inflamação",
      "#parede",
      "#ultrassom"
    ],
    "synonyms": [
      "GB wall",
      "parede vesicular",
      "espessura parede"
    ],
    "searchTerms": [
      "gallbladder wall thickness",
      "acute cholecystitis",
      "GB wall ultrasound",
      "cholecystitis criteria",
      "Murphy sign"
    ],
    "qaChecks": [
      "Alertar se espessura < 1 mm (possível erro)",
      "Alertar se espessura > 10 mm (possível erro)",
      "Validar medição em parede anterior/posterior",
      "Verificar se não confunde com artefato",
      "Considerar contexto clínico (febre, Murphy positivo)"
    ],
    "evidence": {
      "primary_source": "Ralls PW et al. Real-time sonography suspected acute cholecystitis. AJR. 1982;139(1):75-79.",
      "radiopaedia_link": "https://radiopaedia.org/articles/gallbladder-wall-thickness",
      "notes": "Valor normal <3 mm. Espessura >3.5 mm sugerir colecistite aguda.",
      "evidence_notes": "Fonte primária: Ralls PW et al (AJR 1982). Critério clássico para colecistite aguda."
    },
    "inputs": [
      {
        "key": "espessura_parede",
        "label": "espessura_parede",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura máxima parede vesicular"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "ABD-0018": {
    "displayName": "Hepatic Steatosis Ultrasound",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "grade_hepatic_steatosis_ultrasound",
    "tags": [
      "#esteatose",
      "#fígado",
      "#ecogenicidade",
      "#NAFLD",
      "#ultrassom"
    ],
    "synonyms": [
      "Fatty liver",
      "hepatic steatosis US",
      "bright liver"
    ],
    "searchTerms": [
      "hepatic steatosis ultrasound",
      "fatty liver US",
      "echogenicity liver",
      "NAFLD ultrasound",
      "liver brightness"
    ],
    "qaChecks": [
      "Validar cada parâmetro",
      "Verificar se US em jejum",
      "Alertar se cirrose presente (invalida grau)",
      "Alertar se ferro hepático presente",
      "Considerar contexto clínico (obesidade, diabetes)"
    ],
    "evidence": {
      "primary_source": "Hamaguchi M et al. Severity ultrasonographic findings NAFLD. AJR. 2007;188(6):1490-1496.",
      "radiopaedia_link": "https://radiopaedia.org/articles/diffuse-hepatic-steatosis",
      "notes": "Grau US para esteatose. Correlaciona com biópsia e RM.",
      "evidence_notes": "Fonte primária: Hamaguchi M et al (AJR 2007). Método qualitativo baseado em ecogenicidade."
    },
    "inputs": [
      {
        "key": "ecogenicidade_figado",
        "label": "ecogenicidade_figado",
        "type": "enum",
        "required": true,
        "notes": "Ecogenicidade fígado"
      },
      {
        "key": "visibilidade_diafragma",
        "label": "visibilidade_diafragma",
        "type": "enum",
        "required": true,
        "notes": "Visualização diafragma"
      },
      {
        "key": "atenuacao_posterior",
        "label": "atenuacao_posterior",
        "type": "enum",
        "required": true,
        "notes": "Atenuação posterior"
      }
    ]
  },
  "ABD-0019": {
    "displayName": "Pancreatic Echogenicity",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "grade_pancreatic_echogenicity",
    "tags": [
      "#pâncreas",
      "#fibrose",
      "#ecogenicidade",
      "#pancreatite-crônica",
      "#ultrassom"
    ],
    "synonyms": [
      "Pancreatic echotexture",
      "pancreatic echo",
      "parênquima pancreático"
    ],
    "searchTerms": [
      "pancreatic echogenicity",
      "pancreatic fibrosis ultrasound",
      "chronic pancreatitis",
      "pancreatic texture",
      "echo pancreas"
    ],
    "qaChecks": [
      "Validar cada parâmetro",
      "Verificar se US em jejum",
      "Alertar se gases intestinais limitam visualização",
      "Considerar contexto clínico (álcool, tabagismo)",
      "Documentar dilatação ductal se presente"
    ],
    "evidence": {
      "primary_source": "Garg PK et al. Pancreatic echogenicity marker chronic pancreatitis. Pancreatology. 2006;6(4):334-341.",
      "radiopaedia_link": "https://radiopaedia.org/articles/chronic-pancreatitis",
      "notes": "Ecogenicidade aumentada sugerir fibrose pancreática.",
      "evidence_notes": "Fonte primária: Garg PK et al (Pancreatology 2006). Marcador ultrassonográfico de fibrose."
    },
    "inputs": [
      {
        "key": "ecogenicidade_pancreas",
        "label": "ecogenicidade_pancreas",
        "type": "enum",
        "required": true,
        "notes": "Ecogenicidade pâncreas"
      },
      {
        "key": "comparacao_figado",
        "label": "comparacao_figado",
        "type": "enum",
        "required": true,
        "notes": "Comparação com fígado"
      }
    ]
  },
  "ABD-0020": {
    "displayName": "Psoas Muscle Index",
    "category": "C - Abdome",
    "subcategory": "C6 - Retroperitônio",
    "categoryCode": "C",
    "subareaCode": "C6",
    "functionName": "calculate_psoas_muscle_index",
    "tags": [
      "#sarcopenia",
      "#músculo",
      "#massa-corporal",
      "#prognóstico",
      "#TC"
    ],
    "synonyms": [
      "Psoas area",
      "muscle mass",
      "sarcopenia"
    ],
    "searchTerms": [
      "psoas muscle index",
      "sarcopenia CT",
      "muscle mass assessment",
      "PMI cancer",
      "body composition"
    ],
    "qaChecks": [
      "Alertar se area_psoas < 10 cm² (possível erro)",
      "Alertar se area_psoas > 100 cm² (possível erro)",
      "Validar segmentação em L3",
      "Verificar se ambos psoas inclusos",
      "Considerar sexo para interpretação"
    ],
    "evidence": {
      "primary_source": "Prado CM et al. Prevalence clinical implications sarcopenia cancer. J Cachexia Sarcopenia Muscle. 2015;6(1):9-17.",
      "radiopaedia_link": "https://radiopaedia.org/articles/sarcopenia",
      "notes": "Índice para detectar sarcopenia. Prediz prognóstico em câncer.",
      "evidence_notes": "Fonte primária: Prado CM et al (J Cachexia Sarcopenia Muscle 2015). Índice prognóstico em câncer."
    },
    "inputs": [
      {
        "key": "area_psoas",
        "label": "area_psoas",
        "type": "number",
        "unit": "cm²",
        "required": true,
        "validRange": "0-100",
        "notes": "Área total músculo psoas (ambos lados)"
      },
      {
        "key": "altura",
        "label": "altura",
        "type": "number",
        "unit": "m",
        "required": true,
        "validRange": "1.0-2.5",
        "notes": "Altura do paciente em metros"
      }
    ],
    "outputUnits": [
      "cm²/m²"
    ]
  },
  "ABD-0021": {
    "displayName": "Visceral Fat Area",
    "category": "C - Abdome",
    "subcategory": "C6 - Retroperitônio",
    "categoryCode": "C",
    "subareaCode": "C6",
    "functionName": "measure_visceral_fat_area",
    "tags": [
      "#gordura-visceral",
      "#adiposidade",
      "#síndrome-metabólica",
      "#TC",
      "#composição-corporal"
    ],
    "synonyms": [
      "VFA",
      "visceral adiposity",
      "visceral fat index"
    ],
    "searchTerms": [
      "visceral fat area",
      "visceral adiposity",
      "abdominal fat CT",
      "metabolic syndrome",
      "VFA measurement"
    ],
    "qaChecks": [
      "Alertar se vfa < 20 cm² (possível erro)",
      "Alertar se vfa > 500 cm² (possível erro)",
      "Validar segmentação em L4-L5",
      "Verificar se threshold correto",
      "Considerar sexo e idade"
    ],
    "evidence": {
      "primary_source": "Kvist H et al. Total visceral adipose-tissue volumes healthy adults. Am J Clin Nutr. 1988;48(5):1351-1361.",
      "radiopaedia_link": "https://radiopaedia.org/articles/visceral-fat",
      "notes": "VFA >150 cm² associado com síndrome metabólica.",
      "evidence_notes": "Fonte primária: Kvist H et al (Am J Clin Nutr 1988). Método clássico quantificação gordura visceral."
    },
    "inputs": [
      {
        "key": "vfa_cm2",
        "label": "vfa_cm2",
        "type": "number",
        "unit": "cm²",
        "required": true,
        "validRange": "0-500",
        "notes": "Área gordura visceral em TC"
      }
    ],
    "outputUnits": [
      "cm²"
    ]
  },
  "ABD-0022": {
    "displayName": "Abdominal Aorta Calcification Score",
    "category": "C - Abdome",
    "subcategory": "C6 - Retroperitônio",
    "categoryCode": "C",
    "subareaCode": "C6",
    "functionName": "calculate_aorta_calcification_score",
    "tags": [
      "#calcificação",
      "#aorta",
      "#risco-cardiovascular",
      "#TC",
      "#aterosclerose"
    ],
    "synonyms": [
      "AAC",
      "aortic calcification",
      "vascular calcification"
    ],
    "searchTerms": [
      "aortic calcification score",
      "AAC score",
      "vascular calcification",
      "cardiovascular risk",
      "aorta calcification"
    ],
    "qaChecks": [
      "Validar grau entre 0-4",
      "Verificar se TC sem contraste",
      "Alertar se calcificação em outros vasos",
      "Considerar idade e comorbidades",
      "Documentar localização calcificação"
    ],
    "evidence": {
      "primary_source": "Kauppila LI et al. New indices quantify calcific atherosclerosis. Arterioscler Thromb Vasc Biol. 1994;14(7):1080-1087.",
      "radiopaedia_link": "https://radiopaedia.org/articles/vascular-calcification",
      "notes": "AAC Score prediz risco cardiovascular. Score >2 = risco alto.",
      "evidence_notes": "Fonte primária: Kauppila LI et al (Arterioscler Thromb Vasc Biol 1994). Score para risco cardiovascular."
    },
    "inputs": [
      {
        "key": "grau_calcificacao",
        "label": "grau_calcificacao",
        "type": "enum",
        "required": true,
        "notes": "Grau calcificação (0-4 escala visual)"
      }
    ]
  },
  "ABD-0023": {
    "displayName": "Bowel Wall Thickness",
    "category": "C - Abdome",
    "subcategory": "C7 - Intestino",
    "categoryCode": "C",
    "subareaCode": "C7",
    "functionName": "measure_bowel_wall_thickness",
    "tags": [
      "#intestino",
      "#parede",
      "#inflamação",
      "#Crohn",
      "#ultrassom"
    ],
    "synonyms": [
      "Intestinal wall",
      "wall thickness",
      "parede intestinal"
    ],
    "searchTerms": [
      "bowel wall thickness",
      "intestinal wall ultrasound",
      "Crohn disease",
      "bowel inflammation",
      "wall measurement"
    ],
    "qaChecks": [
      "Alertar se espessura < 1 mm (possível erro)",
      "Alertar se espessura > 10 mm (possível erro)",
      "Validar medição em parede máxima",
      "Verificar se não confunde com contraste",
      "Documentar localização e extensão"
    ],
    "evidence": {
      "primary_source": "Hara AK et al. Diagnosis treatment mesenteric ischemia. AJR. 2009;192(2):408-416.",
      "radiopaedia_link": "https://radiopaedia.org/articles/bowel-wall-thickness",
      "notes": "Espessura normal <2 mm. >3 mm sugerir inflamação.",
      "evidence_notes": "Fonte primária: Hara AK et al (AJR 2005). Critério para inflamação intestinal."
    },
    "inputs": [
      {
        "key": "espessura_parede",
        "label": "espessura_parede",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura máxima parede intestinal"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "ABD-0024": {
    "displayName": "Mesenteric Fat Stranding",
    "category": "C - Abdome",
    "subcategory": "C7 - Intestino",
    "categoryCode": "C",
    "subareaCode": "C7",
    "functionName": "grade_mesenteric_fat_stranding",
    "tags": [
      "#mesentério",
      "#inflamação",
      "#isquemia",
      "#TC",
      "#stranding"
    ],
    "synonyms": [
      "Mesenteric inflammation",
      "fat stranding",
      "mesentério"
    ],
    "searchTerms": [
      "mesenteric fat stranding",
      "mesenteric inflammation",
      "mesenteric ischemia",
      "fat stranding CT",
      "mesentery"
    ],
    "qaChecks": [
      "Validar grau_stranding",
      "Verificar se TC com contraste",
      "Alertar se isquemia mesentérica (emergência)",
      "Documentar localização",
      "Considerar contexto clínico"
    ],
    "evidence": {
      "primary_source": "Hara AK et al. Diagnosis treatment mesenteric ischemia. AJR. 2009;192(2):408-416.",
      "radiopaedia_link": "https://radiopaedia.org/articles/acute-mesenteric-ischemia",
      "notes": "Estriamento moderado-acentuado sugerir isquemia mesentérica.",
      "evidence_notes": "Fonte primária: Hara AK et al (AJR 2009). Sinal de isquemia mesentérica."
    },
    "inputs": [
      {
        "key": "grau_stranding",
        "label": "grau_stranding",
        "type": "enum",
        "required": true,
        "notes": "Grau estriamento gordura mesentérica"
      }
    ]
  },
  "ABD-0025": {
    "displayName": "Hepatic Artery Resistive Index",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "calculate_hepatic_artery_ri",
    "tags": [
      "#artéria-hepática",
      "#resistência",
      "#cirrose",
      "#doppler",
      "#hemodynamics"
    ],
    "synonyms": [
      "Hepatic artery RI",
      "HA RI",
      "resistência arterial hepática"
    ],
    "searchTerms": [
      "hepatic artery resistive index",
      "HA RI",
      "hepatic artery doppler",
      "cirrhosis doppler",
      "liver hemodynamics"
    ],
    "qaChecks": [
      "Alertar se RI < 0.3 (possível erro)",
      "Alertar se RI > 1.0 (erro matemático)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Considerar contexto clínico"
    ],
    "evidence": {
      "primary_source": "McNaughton D, Abu-Yousef M. Doppler US Liver. Radiographics. 2011;31(1):161-188.",
      "radiopaedia_link": "https://radiopaedia.org/articles/resistive-index-vascular-ultrasound",
      "notes": "RI >0.70 sugerir cirrose. Complementar com outros índices.",
      "evidence_notes": "Fonte primária: Bolondi L et al (Semin Ultrasound CT MR 1992). Índice para avaliação cirrose."
    },
    "inputs": [
      {
        "key": "psv",
        "label": "PSV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade sistólica pico artéria hepática"
      },
      {
        "key": "edv",
        "label": "EDV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade diastólica final artéria hepática"
      }
    ],
    "outputUnits": [
      "ratio (0-1)"
    ]
  },
  "ABD-0026": {
    "displayName": "Hepatic Vein Doppler Waveform",
    "category": "C - Abdome",
    "subcategory": "C1 - Fígado",
    "categoryCode": "C",
    "subareaCode": "C1",
    "functionName": "classify_hepatic_vein_doppler",
    "tags": [
      "#veia-hepática",
      "#fluxo",
      "#congestão",
      "#Budd-Chiari",
      "#doppler"
    ],
    "synonyms": [
      "Hepatic vein flow",
      "HV waveform",
      "padrão fluxo hepático"
    ],
    "searchTerms": [
      "hepatic vein doppler",
      "hepatic vein waveform",
      "triphasic flow",
      "Budd-Chiari",
      "liver congestion"
    ],
    "qaChecks": [
      "Validar padrão_fluxo",
      "Verificar se medições em veia proximal",
      "Alertar se fluxo reverso (emergência)",
      "Documentar padrão durante respiração",
      "Considerar contexto clínico"
    ],
    "evidence": {
      "primary_source": "Bolondi L et al. Sonographic assessment hepatic hemodynamics. Semin Ultrasound CT MR. 1992;13(1):40-56.",
      "radiopaedia_link": "https://radiopaedia.org/articles/portal-hypertension",
      "notes": "Padrão monofásico/reverso sugerir hipertensão portal.",
      "evidence_notes": "Fonte primária: Bolondi L et al (Semin Ultrasound CT MR 1992). Padrão para congestão."
    },
    "inputs": [
      {
        "key": "padr_o_fluxo",
        "label": "padrão_fluxo",
        "type": "enum",
        "required": true,
        "notes": "Padrão fluxo veia hepática"
      }
    ]
  },
  "ABD-0027": {
    "displayName": "Renal Artery Peak Systolic Velocity",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "measure_renal_artery_psv",
    "tags": [
      "#artéria-renal",
      "#PSV",
      "#estenose",
      "#doppler",
      "#RAS"
    ],
    "synonyms": [
      "PSV renal",
      "peak systolic velocity",
      "velocidade sistólica pico"
    ],
    "searchTerms": [
      "renal artery PSV",
      "peak systolic velocity",
      "renal stenosis doppler",
      "RAS diagnosis",
      "renal artery velocity"
    ],
    "qaChecks": [
      "Alertar se PSV < 50 cm/s (possível erro)",
      "Alertar se PSV > 400 cm/s (possível erro)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Considerar débito cardíaco"
    ],
    "evidence": {
      "primary_source": "Olin JW et al. USRFMD Registry. Circ Cardiovasc Interv. 2012;5(3):432-438.",
      "radiopaedia_link": "https://radiopaedia.org/articles/renal-artery-stenosis",
      "notes": "PSV >180 cm/s sugerir estenose. Complementar com RAR.",
      "evidence_notes": "Fonte primária: Olin JW et al (Circ Cardiovasc Interv 2012). Critério Doppler RAS."
    },
    "inputs": [
      {
        "key": "psv_cm_s",
        "label": "PSV_cm_s",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-400",
        "notes": "Velocidade sistólica pico artéria renal"
      }
    ],
    "outputUnits": [
      "cm/s"
    ]
  },
  "ABD-0028": {
    "displayName": "Renal Artery End-Diastolic Velocity",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "measure_renal_artery_edv",
    "tags": [
      "#artéria-renal",
      "#EDV",
      "#estenose-grave",
      "#doppler",
      "#RAS"
    ],
    "synonyms": [
      "EDV renal",
      "end-diastolic velocity",
      "velocidade diastólica final"
    ],
    "searchTerms": [
      "renal artery EDV",
      "end-diastolic velocity",
      "renal stenosis severity",
      "RAS doppler",
      "diastolic velocity"
    ],
    "qaChecks": [
      "Alertar se EDV < 0 cm/s (erro)",
      "Alertar se EDV > 200 cm/s (possível erro)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Considerar débito cardíaco"
    ],
    "evidence": {
      "primary_source": "Olin JW et al. USRFMD Registry. Circ Cardiovasc Interv. 2012;5(3):432-438.",
      "radiopaedia_link": "https://radiopaedia.org/articles/renal-artery-stenosis",
      "notes": "EDV <20 cm/s sugerir estenose grave. Complementar com PSV/RAR.",
      "evidence_notes": "Fonte primária: Olin JW et al (Circ Cardiovasc Interv 2012). Critério gravidade estenose."
    },
    "inputs": [
      {
        "key": "edv_cm_s",
        "label": "EDV_cm_s",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-200",
        "notes": "Velocidade diastólica final artéria renal"
      }
    ],
    "outputUnits": [
      "cm/s"
    ]
  },
  "ABD-0029": {
    "displayName": "Resistive Index Renal Transplant",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "calculate_renal_transplant_ri",
    "tags": [
      "#transplante-renal",
      "#resistência",
      "#rejeição",
      "#doppler",
      "#monitoramento"
    ],
    "synonyms": [
      "Transplant RI",
      "renal transplant resistance",
      "RI transplante"
    ],
    "searchTerms": [
      "renal transplant RI",
      "transplant resistive index",
      "graft function",
      "transplant doppler",
      "rejection assessment"
    ],
    "qaChecks": [
      "Alertar se RI < 0.3 (possível erro)",
      "Alertar se RI > 1.0 (erro matemático)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Considerar creatinina sérica"
    ],
    "evidence": {
      "primary_source": "Radermecker RP et al. Renal resistive index assessment renal transplant. Nephrol Dial Transplant. 2002;17(8):1409-1417.",
      "radiopaedia_link": "https://radiopaedia.org/articles/renal-transplant-doppler",
      "notes": "RI >0.80 sugerir rejeição. Complementar com creatinina.",
      "evidence_notes": "Fonte primária: Radermecker RP et al (Nephrol Dial Transplant 2002). RI para monitorar transplante."
    },
    "inputs": [
      {
        "key": "psv",
        "label": "PSV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade sistólica pico artéria renal transplante"
      },
      {
        "key": "edv",
        "label": "EDV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade diastólica final artéria renal transplante"
      }
    ],
    "outputUnits": [
      "ratio (0-1)"
    ]
  },
  "ABD-0030": {
    "displayName": "Adrenal Gland Size",
    "category": "C - Abdome",
    "subcategory": "C3 - Adrenais",
    "categoryCode": "C",
    "subareaCode": "C3",
    "functionName": "measure_adrenal_size",
    "tags": [
      "#adrenal",
      "#tamanho",
      "#diâmetro",
      "#hiperplasia",
      "#TC"
    ],
    "synonyms": [
      "Adrenal diameter",
      "adrenal size",
      "tamanho adrenal"
    ],
    "searchTerms": [
      "adrenal gland size",
      "adrenal diameter",
      "adrenal hyperplasia",
      "adrenal adenoma",
      "adrenal measurement"
    ],
    "qaChecks": [
      "Alertar se diametro < 5 mm (possível erro)",
      "Alertar se diametro > 50 mm (possível erro ou massa)",
      "Validar medição em eixo transversal",
      "Medir ambas adrenais para comparação",
      "Considerar contexto clínico (Cushing, Addison)"
    ],
    "evidence": {
      "primary_source": "Boland GW et al. Characterization adrenal masses. Radiology. 1998;209(1):131-138.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adrenal-gland-size",
      "notes": "Tamanho normal <10 mm. >12 mm sugerir hiperplasia.",
      "evidence_notes": "Fonte primária: Boland GW et al (Radiology 1998). Valores normais adrenal."
    },
    "inputs": [
      {
        "key": "diametro_max",
        "label": "diametro_max",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-50",
        "notes": "Maior diâmetro glândula adrenal"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "ABD-0031": {
    "displayName": "Adrenal Lipid Content Index",
    "category": "C - Abdome",
    "subcategory": "C3 - Adrenais",
    "categoryCode": "C",
    "subareaCode": "C3",
    "functionName": "calculate_adrenal_lipid_index",
    "tags": [
      "#adrenal",
      "#gordura",
      "#lipídico",
      "#adenoma",
      "#TC"
    ],
    "synonyms": [
      "Lipid index",
      "lipid content",
      "índice lipídico"
    ],
    "searchTerms": [
      "adrenal lipid index",
      "lipid-rich adenoma",
      "adrenal CT characterization",
      "HU measurement",
      "adenoma lipid"
    ],
    "qaChecks": [
      "Alertar se lipid_index < -100 (possível erro)",
      "Alertar se lipid_index > 100 (possível erro)",
      "Validar ROI ≥1 cm",
      "Verificar se evita necrose/vasos",
      "Considerar insuficiência renal"
    ],
    "evidence": {
      "primary_source": "Caoili EM et al. Adrenal masses characterization. Radiology. 2002;222(3):629-633.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adrenal-adenoma",
      "notes": "HU <-10 = adenoma lipídico com alta especificidade.",
      "evidence_notes": "Fonte primária: Caoili EM et al (Radiology 2002). Índice para detectar gordura."
    },
    "inputs": [
      {
        "key": "hu_nc",
        "label": "HU_nc",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "-100-100",
        "notes": "Atenuação fase NC (não contraste)"
      },
      {
        "key": "hu_portal",
        "label": "HU_portal",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "0-200",
        "notes": "Atenuação fase portal"
      }
    ],
    "outputUnits": [
      "HU"
    ]
  },
  "ABD-0032": {
    "displayName": "Splenic Artery Resistive Index",
    "category": "C - Abdome",
    "subcategory": "C4 - Baço",
    "categoryCode": "C",
    "subareaCode": "C4",
    "functionName": "calculate_splenic_artery_ri",
    "tags": [
      "#artéria-esplênica",
      "#resistência",
      "#hipertensão-portal",
      "#doppler",
      "#hemodynamics"
    ],
    "synonyms": [
      "Splenic artery RI",
      "RA RI",
      "resistência arterial esplênica"
    ],
    "searchTerms": [
      "splenic artery resistive index",
      "splenic artery doppler",
      "portal hypertension doppler",
      "RA RI",
      "spleen hemodynamics"
    ],
    "qaChecks": [
      "Alertar se RI < 0.3 (possível erro)",
      "Alertar se RI > 1.0 (erro matemático)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Considerar contexto clínico"
    ],
    "evidence": {
      "primary_source": "Bolondi L et al. Sonographic assessment hepatic hemodynamics. Semin Ultrasound CT MR. 1992;13(1):40-56.",
      "radiopaedia_link": "https://radiopaedia.org/articles/portal-hypertension",
      "notes": "RI >0.70 sugerir hipertensão portal.",
      "evidence_notes": "Fonte primária: Bolondi L et al (Semin Ultrasound CT MR 1992). Índice PH."
    },
    "inputs": [
      {
        "key": "psv",
        "label": "PSV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade sistólica pico artéria esplênica"
      },
      {
        "key": "edv",
        "label": "EDV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-2",
        "notes": "Velocidade diastólica final artéria esplênica"
      }
    ],
    "outputUnits": [
      "ratio (0-1)"
    ]
  },
  "ABD-0033": {
    "displayName": "Spleen Doppler Flow Direction",
    "category": "C - Abdome",
    "subcategory": "C4 - Baço",
    "categoryCode": "C",
    "subareaCode": "C4",
    "functionName": "classify_spleen_doppler_flow",
    "tags": [
      "#baço",
      "#fluxo-portal",
      "#hepatofugal",
      "#hipertensão-portal",
      "#doppler"
    ],
    "synonyms": [
      "Portal flow direction",
      "flow direction",
      "direção fluxo"
    ],
    "searchTerms": [
      "portal flow direction",
      "hepatofugal flow",
      "hepatopetal flow",
      "portal vein reversal",
      "portal hypertension"
    ],
    "qaChecks": [
      "Validar direcao_fluxo",
      "Verificar se medições em veia esplênica/porta",
      "Alertar se fluxo reverso (emergência)",
      "Documentar padrão durante respiração",
      "Considerar contexto clínico"
    ],
    "evidence": {
      "primary_source": "Bolondi L et al. Sonographic assessment hepatic hemodynamics. Semin Ultrasound CT MR. 1992;13(1):40-56.",
      "radiopaedia_link": "https://radiopaedia.org/articles/portal-hypertension",
      "notes": "Fluxo hepatofugal = hipertensão portal avançada.",
      "evidence_notes": "Fonte primária: Bolondi L et al (Semin Ultrasound CT MR 1992). Indicador PH grave."
    },
    "inputs": [
      {
        "key": "direcao_fluxo",
        "label": "direcao_fluxo",
        "type": "enum",
        "required": true,
        "notes": "Direção fluxo veia porta/esplênica"
      }
    ]
  },
  "ABD-0034": {
    "displayName": "Bile Duct Stone Diameter",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "measure_bile_duct_stone_diameter",
    "tags": [
      "#cálculo-biliar",
      "#tamanho",
      "#obstrução",
      "#colangite",
      "#ultrassom"
    ],
    "synonyms": [
      "Stone size",
      "tamanho cálculo",
      "diâmetro cálculo"
    ],
    "searchTerms": [
      "bile duct stone size",
      "choledocholithiasis",
      "stone diameter",
      "CBD stone",
      "biliary stone"
    ],
    "qaChecks": [
      "Alertar se d_calcul < 2 mm (possível erro)",
      "Alertar se d_calcul > 50 mm (possível erro)",
      "Validar medição em eixo transversal",
      "Documentar localização (CBD vs vesícula)",
      "Considerar número de cálculos"
    ],
    "evidence": {
      "primary_source": "Aerts M et al. Bile duct stones. Eur J Radiol. 2011;80(2):441-450.",
      "radiopaedia_link": "https://radiopaedia.org/articles/choledocholithiasis",
      "notes": "Cálculos >10 mm = risco obstrução aumentado.",
      "evidence_notes": "Fonte primária: Aerts M et al (Eur J Radiol 2011). Tamanho para risco obstrução."
    },
    "inputs": [
      {
        "key": "d_calcul",
        "label": "d_calcul",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-50",
        "notes": "Maior diâmetro cálculo biliar"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "ABD-0035": {
    "displayName": "Hepatic Steatosis Grading",
    "category": "C - Abdome",
    "subcategory": "C5 - Vesícula/Vias Biliares",
    "categoryCode": "C",
    "subareaCode": "C5",
    "functionName": "grade_hepatic_steatosis_ct",
    "tags": [
      "#esteatose",
      "#fígado",
      "#grau",
      "#NAFLD",
      "#TC"
    ],
    "synonyms": [
      "Steatosis grade",
      "hepatic fat",
      "grau esteatose"
    ],
    "searchTerms": [
      "hepatic steatosis grading",
      "fatty liver grading",
      "NAFLD grading",
      "liver fat quantification",
      "steatosis severity"
    ],
    "qaChecks": [
      "Alertar se HU_figado < -200 (possível erro)",
      "Alertar se HU_figado > 100 (possível erro)",
      "Validar fase portal (não arterial)",
      "Verificar se ROI ≥1 cm",
      "Considerar cirrose/fibrose"
    ],
    "evidence": {
      "primary_source": "Piekarski J et al. Difference liver spleen CT numbers. Radiology. 1989;171(1):149-151.",
      "radiopaedia_link": "https://radiopaedia.org/articles/diffuse-hepatic-steatosis",
      "notes": "Diferença HU fígado-rim para grau esteatose. Correlaciona com biópsia.",
      "evidence_notes": "Fonte primária: Piekarski J et al (Radiology 1989). Classificação esteatose TC."
    },
    "inputs": [
      {
        "key": "hu_figado",
        "label": "HU_figado",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "-200-100",
        "notes": "Atenuação fígado em TC"
      },
      {
        "key": "hu_rim",
        "label": "HU_rim",
        "type": "number",
        "unit": "HU",
        "required": true,
        "validRange": "0-100",
        "notes": "Atenuação rim direito em TC"
      }
    ]
  },
  "ABD-0036": {
    "displayName": "Distância Pele-Cálculo (SSD) - Média",
    "category": "C - Abdome",
    "subcategory": "C2 - Rins",
    "categoryCode": "C",
    "subareaCode": "C2",
    "functionName": "calculate_stone_skin_distance_mean",
    "tags": [
      "#litíase",
      "#rim",
      "#distância",
      "#SSD",
      "#TC"
    ],
    "synonyms": [
      "SSD",
      "skin-to-stone distance",
      "distância pele-cálculo",
      "distância pele cálculo"
    ],
    "searchTerms": [
      "skin-to-stone distance",
      "SSD mean",
      "stone skin distance",
      "distância pele cálculo",
      "litíase renal SSD"
    ],
    "qaChecks": [
      "Alertar se SSD_mean < 10 mm (possível erro)",
      "Alertar se SSD_mean > 300 mm (possível erro)",
      "Validar que as 3 medidas foram fornecidas"
    ],
    "evidence": {
      "notes": "TODO: adicionar fonte para SSD (litíase renal).",
      "evidence_notes": "TODO: adicionar fonte para SSD (litíase renal)."
    },
    "inputs": [
      {
        "key": "ssd_1",
        "label": "SSD 1",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-300",
        "notes": "Distância pele-cálculo medida 1"
      },
      {
        "key": "ssd_2",
        "label": "SSD 2",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-300",
        "notes": "Distância pele-cálculo medida 2"
      },
      {
        "key": "ssd_3",
        "label": "SSD 3",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-300",
        "notes": "Distância pele-cálculo medida 3"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "GIN-0001": {
    "displayName": "Hadlock EFW Formula",
    "category": "G - Gineco/Obstetrícia",
    "subcategory": "G1 - Biometria Fetal",
    "categoryCode": "G",
    "subareaCode": "G1",
    "functionName": "calculate_hadlock_efw",
    "tags": [
      "#feto",
      "#peso",
      "#Hadlock",
      "#biometria",
      "#fórmula"
    ],
    "synonyms": [
      "Hadlock formula",
      "fetal weight estimation"
    ],
    "searchTerms": [
      "Hadlock formula",
      "fetal weight estimation",
      "EFW equation",
      "fetal biometry",
      "estimated fetal weight"
    ],
    "qaChecks": [
      "Alertar se peso < 500 g (possível erro)",
      "Alertar se peso > 5000 g (possível erro)",
      "Validar medições em planos corretos",
      "Verificar se idade gestacional consistente",
      "Alertar se múltiplas gestações (fórmula para singleton)"
    ],
    "evidence": {
      "primary_source": "Hadlock FP et al. In utero analysis fetal weight estimation birth weight. Obstet Gynecol. 1991;77(5):662-667.",
      "radiopaedia_link": "https://radiopaedia.org/articles/fetal-biometry",
      "notes": "Hadlock é equação padrão ouro EFW. Acurácia ±10-15% terceiro trimestre.",
      "evidence_notes": "Fonte primária: Hadlock FP et al (Obstet Gynecol 1991). Equação padrão ouro EFW."
    },
    "inputs": [
      {
        "key": "ac",
        "label": "AC",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-40",
        "notes": "Circunferência abdominal"
      },
      {
        "key": "fl",
        "label": "FL",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Comprimento fêmur"
      },
      {
        "key": "bpd",
        "label": "BPD",
        "type": "number",
        "unit": "cm",
        "required": false,
        "validRange": "0-12",
        "notes": "Diâmetro biparietal (opcional)"
      },
      {
        "key": "hc",
        "label": "HC",
        "type": "number",
        "unit": "cm",
        "required": false,
        "validRange": "0-40",
        "notes": "Circunferência cefálica (opcional)"
      }
    ],
    "outputUnits": [
      "g"
    ]
  },
  "GIN-0002": {
    "displayName": "Ovarian Volume Ellipsoid",
    "category": "G - Gineco/Obstetrícia",
    "subcategory": "G2 - Ovário",
    "categoryCode": "G",
    "subareaCode": "G2",
    "functionName": "calculate_ovarian_volume_ellipsoid",
    "tags": [
      "#ovário",
      "#volume",
      "#elipsoide",
      "#PCOS",
      "#fórmula"
    ],
    "synonyms": [
      "Ovary volume",
      "ovarian volume"
    ],
    "searchTerms": [
      "ovarian volume",
      "ovary volume formula",
      "PCOS volume",
      "ovarian measurement",
      "ellipsoid formula ovary"
    ],
    "qaChecks": [
      "Alertar se volume < 3 mL (possível erro)",
      "Alertar se volume > 50 mL (possível erro ou cisto)",
      "Validar medições em três planos perpendiculares",
      "Verificar se fórmula elipsoide apropriada",
      "Medir ambos ovários para comparação"
    ],
    "evidence": {
      "primary_source": "Amer SA et al. Ovarian volume women polycystic ovaries. Hum Reprod. 2004;19(1):122-126.",
      "radiopaedia_link": "https://radiopaedia.org/articles/polycystic-ovary-syndrome",
      "notes": "Fórmula elipsoide para volume ovariano. Volume >12 mL sugere SOP se bilateral.",
      "evidence_notes": "Fonte primária: Amer SA et al (Hum Reprod 2004). Fórmula para volume ovariano."
    },
    "inputs": [
      {
        "key": "comprimento",
        "label": "comprimento",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Comprimento ovário"
      },
      {
        "key": "largura",
        "label": "largura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Largura ovário"
      },
      {
        "key": "espessura",
        "label": "espessura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura ovário"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "GIN-0003": {
    "displayName": "O-RADS US",
    "category": "G - Gineco/Obstetrícia",
    "subcategory": "G3 - Adnexo",
    "categoryCode": "G",
    "subareaCode": "G3",
    "functionName": "classify_ovarian_lesion_orads_us",
    "tags": [
      "#ovário",
      "#O-RADS",
      "#classificação",
      "#ultrassom",
      "#lesão"
    ],
    "synonyms": [
      "Ovarian-Adnexal Reporting and Data System",
      "ovarian lesion classification"
    ],
    "searchTerms": [
      "O-RADS ultrasound",
      "ovarian lesion classification",
      "O-RADS score",
      "adnexal mass classification",
      "ovarian mass risk"
    ],
    "qaChecks": [
      "Validar tamanho_mm > 0",
      "Verificar composição correta",
      "Confirmar vascularização ao Doppler",
      "Documentar achados adicionais",
      "Alertar se achados sugestivos malignidade (ascite, derrame)"
    ],
    "evidence": {
      "primary_source": "Amor F et al. Differentiate benign malignant ovarian masses. Ultrasound Obstet Gynecol. 2002;20(5):467-472.",
      "radiopaedia_link": "https://radiopaedia.org/articles/ovarian-adnexal-reporting-and-data-system-ultrasound-o-rads-us",
      "notes": "O-RADS US para classificação lesões ovarianas. Baseado em risco malignidade.",
      "evidence_notes": "Fonte primária: Amor F et al (Ultrasound Obstet Gynecol 2002). Sistema classificação lesões ovarianas."
    },
    "inputs": [
      {
        "key": "tamanho_mm",
        "label": "tamanho_mm",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-150",
        "notes": "Maior diâmetro lesão"
      },
      {
        "key": "composicao",
        "label": "composicao",
        "type": "enum",
        "required": true,
        "notes": "Composição lesão"
      },
      {
        "key": "vascularizacao",
        "label": "vascularizacao",
        "type": "enum",
        "required": true,
        "notes": "Vascularização ao Doppler"
      },
      {
        "key": "achados_adicionais",
        "label": "achados_adicionais",
        "type": "string",
        "required": false,
        "notes": "Outros achados (ex: ascite, derrame pleural)"
      }
    ]
  },
  "PEL-0001": {
    "displayName": "Prostate PSA Density",
    "category": "I - Pelve",
    "subcategory": "I1 - Próstata",
    "categoryCode": "I",
    "subareaCode": "I1",
    "functionName": "calculate_prostate_psa_density",
    "tags": [
      "#próstata",
      "#PSA",
      "#densidade",
      "#câncer",
      "#prognóstico"
    ],
    "synonyms": [
      "PSA density",
      "PSAD",
      "PSA/volume"
    ],
    "searchTerms": [
      "PSA density",
      "PSAD prostate cancer",
      "PSA volume ratio",
      "prostate cancer risk",
      "PSAD cutoff"
    ],
    "qaChecks": [
      "Alertar se PSA < 0 ou > 100 (possível erro)",
      "Alertar se volume < 10 mL (possível erro)",
      "Validar que PSA e volume são recentes",
      "Considerar história familiar",
      "Documentar idade"
    ],
    "evidence": {
      "primary_source": "Karakiewicz PI et al. Prognostic role PSA density. Eur Urol. 2007;51(2):352-359.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-specific-antigen-density",
      "notes": "PSAD >0.25 ng/mL² aumenta risco câncer clinicamente significativo.",
      "evidence_notes": "Fonte primária: Karakiewicz PI et al (Eur Urol 2007). Índice prognóstico câncer próstata."
    },
    "inputs": [
      {
        "key": "psa",
        "label": "PSA",
        "type": "number",
        "unit": "ng/mL",
        "required": true,
        "validRange": "0-100",
        "notes": "Nível PSA sérico"
      },
      {
        "key": "volume_prostata",
        "label": "volume_prostata",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-200",
        "notes": "Volume próstata (TC/RM/US)"
      }
    ],
    "outputUnits": [
      "ng/mL²"
    ]
  },
  "PEL-0002": {
    "displayName": "Transition Zone PSA Density",
    "category": "I - Pelve",
    "subcategory": "I1 - Próstata",
    "categoryCode": "I",
    "subareaCode": "I1",
    "functionName": "calculate_transition_zone_psa_density",
    "tags": [
      "#próstata",
      "#zona-transição",
      "#PSA",
      "#especificidade",
      "#câncer"
    ],
    "synonyms": [
      "TZ-PSAD",
      "PSA densidade zona transição"
    ],
    "searchTerms": [
      "transition zone PSA density",
      "TZ-PSAD",
      "zone-specific PSA",
      "prostate cancer specificity",
      "PSA zone"
    ],
    "qaChecks": [
      "Alertar se PSA < 0 ou > 100 (possível erro)",
      "Alertar se volume_tz < 5 mL (possível erro)",
      "Validar que PSA e volume são recentes",
      "Confirmar que volume é zona transição (não total)",
      "Considerar história familiar"
    ],
    "evidence": {
      "primary_source": "Karakiewicz PI et al. Prognostic role PSA density. Eur Urol. 2007;51(2):352-359.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-specific-antigen-density",
      "notes": "TZ-PSAD >0.20 ng/mL² aumenta especificidade para câncer.",
      "evidence_notes": "Fonte primária: Karakiewicz PI et al (Eur Urol 2007). Melhora especificidade diagnóstica."
    },
    "inputs": [
      {
        "key": "psa",
        "label": "PSA",
        "type": "number",
        "unit": "ng/mL",
        "required": true,
        "validRange": "0-100",
        "notes": "Nível PSA sérico"
      },
      {
        "key": "volume_tz",
        "label": "volume_tz",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-100",
        "notes": "Volume zona transição (RM)"
      }
    ],
    "outputUnits": [
      "ng/mL²"
    ]
  },
  "PEL-0003": {
    "displayName": "Endometrial Thickness",
    "category": "I - Pelve",
    "subcategory": "I2 - Útero",
    "categoryCode": "I",
    "subareaCode": "I2",
    "functionName": "measure_endometrial_thickness",
    "tags": [
      "#endométrio",
      "#espessura",
      "#sangramento",
      "#rastreamento",
      "#ultrassom"
    ],
    "synonyms": [
      "Endometrial stripe",
      "ET",
      "espessura endométrio"
    ],
    "searchTerms": [
      "endometrial thickness",
      "endometrial stripe",
      "postmenopausal bleeding",
      "endometrial cancer screening",
      "ET measurement"
    ],
    "qaChecks": [
      "Alertar se espessura < 1 mm (possível erro)",
      "Alertar se espessura > 30 mm (possível erro)",
      "Validar medição em corte sagital",
      "Documentar fase ciclo",
      "Considerar sangramento pós-menopausa"
    ],
    "evidence": {
      "primary_source": "Karlsson B et al. Transvaginal ultrasonography endometrium postmenopausal bleeding. Ultrasound Obstet Gynecol. 1995;6(3):160-164.",
      "radiopaedia_link": "https://radiopaedia.org/articles/endometrial-thickness",
      "notes": "Espessura >16 mm pós-menopausa = investigar. Valor cutoff 5 mm em sangramento pós-menopausa.",
      "evidence_notes": "Fonte primária: Karlsson B et al (Ultrasound Obstet Gynecol 1995). Critério para rastreamento câncer."
    },
    "inputs": [
      {
        "key": "espessura_endometrio",
        "label": "espessura_endometrio",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-30",
        "notes": "Espessura máxima endométrio"
      },
      {
        "key": "fase_ciclo",
        "label": "fase_ciclo",
        "type": "enum",
        "required": true,
        "notes": "Fase do ciclo menstrual"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0004": {
    "displayName": "Uterine Fibroid Volume",
    "category": "I - Pelve",
    "subcategory": "I2 - Útero",
    "categoryCode": "I",
    "subareaCode": "I2",
    "functionName": "calculate_uterine_fibroid_volume",
    "tags": [
      "#mioma",
      "#volume",
      "#fibróide",
      "#útero",
      "#RM"
    ],
    "synonyms": [
      "Fibroid volume",
      "leiomioma volume",
      "myoma"
    ],
    "searchTerms": [
      "uterine fibroid volume",
      "fibroid size",
      "leiomyoma volume",
      "myoma measurement",
      "fibroid assessment"
    ],
    "qaChecks": [
      "Alertar se volume < 10 mL (possível erro)",
      "Alertar se volume > 2000 mL (possível erro)",
      "Validar medições em três planos",
      "Documentar localização (submucoso/intramural/subseroso)",
      "Considerar sintomas"
    ],
    "evidence": {
      "primary_source": "Garcia-Solares J et al. Pathogenesis uterine adenomyosis. Fertil Steril. 2018;109(3):371-387.",
      "radiopaedia_link": "https://radiopaedia.org/articles/uterine-fibroids",
      "notes": "Volume >500 mL = indicação tratamento. Fórmula elipsoide validada.",
      "evidence_notes": "Fonte primária: Garcia-Solares J et al (Fertil Steril 2018). Fórmula elipsoide para volume."
    },
    "inputs": [
      {
        "key": "comprimento",
        "label": "comprimento",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-20",
        "notes": "Comprimento mioma"
      },
      {
        "key": "largura",
        "label": "largura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-20",
        "notes": "Largura mioma"
      },
      {
        "key": "altura",
        "label": "altura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-20",
        "notes": "Altura mioma"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "PEL-0005": {
    "displayName": "Adenomyosis Junctional Zone",
    "category": "I - Pelve",
    "subcategory": "I2 - Útero",
    "categoryCode": "I",
    "subareaCode": "I2",
    "functionName": "measure_adenomyosis_junctional_zone",
    "tags": [
      "#adenomiose",
      "#zona-junção",
      "#JZ",
      "#útero",
      "#RM"
    ],
    "synonyms": [
      "JZ thickness",
      "junctional zone",
      "zona de junção"
    ],
    "searchTerms": [
      "adenomyosis junctional zone",
      "JZ thickness",
      "junctional zone adenomyosis",
      "adenomyosis MRI",
      "uterine adenomyosis"
    ],
    "qaChecks": [
      "Alertar se espessura < 2 mm (possível erro)",
      "Alertar se espessura > 30 mm (possível erro)",
      "Validar medição em corte sagital",
      "Avaliar regularidade JZ",
      "Considerar fase ciclo"
    ],
    "evidence": {
      "primary_source": "Garcia-Solares J et al. Pathogenesis uterine adenomyosis. Fertil Steril. 2018;109(3):371-387.",
      "radiopaedia_link": "https://radiopaedia.org/articles/adenomyosis",
      "notes": "Espessura JZ >12 mm + irregularidade = adenomiose. Afeta fertilidade.",
      "evidence_notes": "Fonte primária: Garcia-Solares J et al (Fertil Steril 2018). Critério RM para adenomiose."
    },
    "inputs": [
      {
        "key": "espessura_jz",
        "label": "espessura_jz",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-30",
        "notes": "Espessura máxima zona de junção"
      },
      {
        "key": "irregularidade_jz",
        "label": "irregularidade_jz",
        "type": "boolean",
        "required": true,
        "notes": "Zona de junção irregular?"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0006": {
    "displayName": "Bladder Wall Thickness",
    "category": "I - Pelve",
    "subcategory": "I3 - Bexiga",
    "categoryCode": "I",
    "subareaCode": "I3",
    "functionName": "measure_bladder_wall_thickness",
    "tags": [
      "#bexiga",
      "#parede",
      "#espessura",
      "#obstrução",
      "#ultrassom"
    ],
    "synonyms": [
      "Bladder wall",
      "parede vesical",
      "espessura parede"
    ],
    "searchTerms": [
      "bladder wall thickness",
      "bladder outlet obstruction",
      "overactive bladder",
      "bladder wall measurement",
      "BOO"
    ],
    "qaChecks": [
      "Alertar se espessura < 1 mm (possível erro)",
      "Alertar se espessura > 10 mm (possível erro)",
      "Validar medição em bexiga cheia",
      "Verificar se não confunde com artefato",
      "Considerar volume bexiga"
    ],
    "evidence": {
      "primary_source": "Oelke M et al. EAU Guidelines Management Overactive Bladder. Eur Urol. 2013;63(3):405-426.",
      "radiopaedia_link": "https://radiopaedia.org/articles/bladder-wall-thickness",
      "notes": "Espessura >5 mm sugerir obstrução. Correlaciona com sintomas.",
      "evidence_notes": "Fonte primária: Oelke M et al (Eur Urol 2013). Guideline EAU para bexiga hiperativa."
    },
    "inputs": [
      {
        "key": "espessura_parede",
        "label": "espessura_parede",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura máxima parede vesical"
      },
      {
        "key": "volume_bexiga",
        "label": "volume_bexiga",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-500",
        "notes": "Volume bexiga (mL)"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0007": {
    "displayName": "Post-Void Residual Volume",
    "category": "I - Pelve",
    "subcategory": "I3 - Bexiga",
    "categoryCode": "I",
    "subareaCode": "I3",
    "functionName": "measure_post_void_residual_volume",
    "tags": [
      "#bexiga",
      "#resíduo",
      "#pós-miccional",
      "#retenção",
      "#ultrassom"
    ],
    "synonyms": [
      "PVR",
      "post-void residual",
      "resíduo pós-miccional"
    ],
    "searchTerms": [
      "post-void residual",
      "PVR ultrasound",
      "post-void residual volume",
      "urinary retention",
      "residual urine"
    ],
    "qaChecks": [
      "Alertar se volume < 0 mL (erro)",
      "Alertar se volume > 500 mL (possível erro ou retenção massiva)",
      "Validar medição pós-miccional",
      "Confirmar que paciente esvaziou bexiga",
      "Repetir medição se resultado inesperado"
    ],
    "evidence": {
      "primary_source": "Poston GJ et al. Ultrasound measurement post-void residual volume. Br J Urol. 1994;73(3):294-298.",
      "radiopaedia_link": "https://radiopaedia.org/articles/post-void-residual-volume",
      "notes": "PVR >100 mL = retenção. Valor normal <50 mL.",
      "evidence_notes": "Fonte primária: Poston GJ et al (Br J Urol 1994). Método US para quantificar retenção."
    },
    "inputs": [
      {
        "key": "volume_residuo",
        "label": "volume_residuo",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-500",
        "notes": "Volume urina residual pós-miccional"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "PEL-0008": {
    "displayName": "Rectal Wall Thickness",
    "category": "I - Pelve",
    "subcategory": "I4 - Reto/Cólon",
    "categoryCode": "I",
    "subareaCode": "I4",
    "functionName": "measure_rectal_wall_thickness",
    "tags": [
      "#reto",
      "#parede",
      "#espessura",
      "#câncer",
      "#TC"
    ],
    "synonyms": [
      "Rectal wall",
      "parede retal",
      "espessura parede"
    ],
    "searchTerms": [
      "rectal wall thickness",
      "rectal cancer",
      "rectal wall measurement",
      "rectal tumor",
      "rectal pathology"
    ],
    "qaChecks": [
      "Alertar se espessura < 2 mm (possível erro)",
      "Alertar se espessura > 15 mm (possível erro)",
      "Validar medição em segmento tumor",
      "Documentar localização exata",
      "Considerar estadiamento TNM completo"
    ],
    "evidence": {
      "primary_source": "Beets-Tan RG et al. Magnetic resonance imaging rectum staging. Eur Radiol. 2000;10(12):1886-1895.",
      "radiopaedia_link": "https://radiopaedia.org/articles/rectal-cancer-staging",
      "notes": "Espessura parede correlaciona com T-stage. Importante para prognóstico.",
      "evidence_notes": "Fonte primária: Beets-Tan RG et al (Eur Radiol 2000). Critério para estadiamento retal."
    },
    "inputs": [
      {
        "key": "espessura_parede",
        "label": "espessura_parede",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura máxima parede retal"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0009": {
    "displayName": "Rectal Cancer TNM Staging",
    "category": "I - Pelve",
    "subcategory": "I4 - Reto/Cólon",
    "categoryCode": "I",
    "subareaCode": "I4",
    "functionName": "classify_rectal_cancer_tnm",
    "tags": [
      "#câncer-retal",
      "#TNM",
      "#estadiamento",
      "#prognóstico",
      "#RM"
    ],
    "synonyms": [
      "TNM staging",
      "tumor staging",
      "estadiamento retal"
    ],
    "searchTerms": [
      "rectal cancer TNM",
      "rectal cancer staging",
      "TNM classification",
      "tumor staging rectal",
      "T stage N stage"
    ],
    "qaChecks": [
      "Validar cada stage",
      "Confirmar estadiamento completo",
      "Documentar critérios para cada stage",
      "Considerar terapia neoadjuvante",
      "Correlacionar com patologia"
    ],
    "evidence": {
      "primary_source": "Beets-Tan RG et al. Magnetic resonance imaging rectum staging. Eur Radiol. 2000;10(12):1886-1895.",
      "radiopaedia_link": "https://radiopaedia.org/articles/rectal-cancer-staging",
      "notes": "TNM 8ª edição (2017). Importante para decisão terapêutica.",
      "evidence_notes": "Fonte primária: Beets-Tan RG et al (Eur Radiol 2000). Classificação TNM para retal."
    },
    "inputs": [
      {
        "key": "t_stage",
        "label": "t_stage",
        "type": "enum",
        "required": true,
        "notes": "T-stage (profundidade invasão)"
      },
      {
        "key": "n_stage",
        "label": "n_stage",
        "type": "enum",
        "required": true,
        "notes": "N-stage (linfonodos)"
      },
      {
        "key": "m_stage",
        "label": "m_stage",
        "type": "enum",
        "required": true,
        "notes": "M-stage (metástases)"
      }
    ]
  },
  "PEL-0010": {
    "displayName": "Circumferential Resection Margin",
    "category": "I - Pelve",
    "subcategory": "I4 - Reto/Cólon",
    "categoryCode": "I",
    "subareaCode": "I4",
    "functionName": "measure_circumferential_resection_margin",
    "tags": [
      "#câncer-retal",
      "#margem",
      "#ressecção",
      "#CRM",
      "#RM"
    ],
    "synonyms": [
      "CRM",
      "margem de ressecção circunferencial",
      "CRM"
    ],
    "searchTerms": [
      "circumferential resection margin",
      "CRM rectal cancer",
      "mesorectal fascia",
      "CRM measurement",
      "rectal cancer prognosis"
    ],
    "qaChecks": [
      "Alertar se distancia < 0 mm (erro)",
      "Alertar se distancia > 50 mm (possível erro)",
      "Validar medição em cortes axiais",
      "Documentar localização mínima",
      "Considerar terapia neoadjuvante"
    ],
    "evidence": {
      "primary_source": "Beets-Tan RG et al. Magnetic resonance imaging rectum staging. Eur Radiol. 2000;10(12):1886-1895.",
      "radiopaedia_link": "https://radiopaedia.org/articles/circumferential-resection-margin",
      "notes": "CRM <2 mm = risco recorrência. Importante para decisão terapêutica.",
      "evidence_notes": "Fonte primária: Beets-Tan RG et al (Eur Radiol 2000). Fator prognóstico independente."
    },
    "inputs": [
      {
        "key": "distancia_crm",
        "label": "distancia_crm",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-50",
        "notes": "Distância tumor até margem circunferencial"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0011": {
    "displayName": "Ovarian Torsion Criteria",
    "category": "I - Pelve",
    "subcategory": "I5 - Ovário Avançado",
    "categoryCode": "I",
    "subareaCode": "I5",
    "functionName": "diagnose_ovarian_torsion",
    "tags": [
      "#ovário",
      "#torsão",
      "#emergência",
      "#doppler",
      "#ultrassom"
    ],
    "synonyms": [
      "Ovarian torsion",
      "torsão ovariana",
      "critério torsão"
    ],
    "searchTerms": [
      "ovarian torsion",
      "ovarian torsion ultrasound",
      "torsion criteria",
      "ovarian emergency",
      "torsion doppler"
    ],
    "qaChecks": [
      "Validar fluxo Doppler bilateral",
      "Confirmar edema estromal",
      "Documentar volume",
      "Considerar contexto clínico (dor aguda)",
      "Alertar se torsão provável (emergência)"
    ],
    "evidence": {
      "primary_source": "Pena JA et al. Sonography ovarian torsion. AJR. 1992;159(3):539-541.",
      "radiopaedia_link": "https://radiopaedia.org/articles/ovarian-torsion",
      "notes": "Ausência fluxo Doppler + edema = torsão. Emergência cirúrgica.",
      "evidence_notes": "Fonte primária: Pena JA et al (AJR 1992). Critério US para diagnóstico torsão."
    },
    "inputs": [
      {
        "key": "doppler_fluxo",
        "label": "doppler_fluxo",
        "type": "enum",
        "required": true,
        "notes": "Fluxo Doppler ovariano"
      },
      {
        "key": "volume_ovario",
        "label": "volume_ovario",
        "type": "number",
        "unit": "mL",
        "required": true,
        "validRange": "0-100",
        "notes": "Volume ovário"
      },
      {
        "key": "edema_estroma",
        "label": "edema_estroma",
        "type": "boolean",
        "required": true,
        "notes": "Edema estromal presente?"
      }
    ]
  },
  "PEL-0012": {
    "displayName": "Ovarian Reserve Anti-Müllerian Hormone",
    "category": "I - Pelve",
    "subcategory": "I5 - Ovário Avançado",
    "categoryCode": "I",
    "subareaCode": "I5",
    "functionName": "assess_ovarian_reserve_amh",
    "tags": [
      "#ovário",
      "#AMH",
      "#reserva",
      "#fertilidade",
      "#laboratorial"
    ],
    "synonyms": [
      "AMH",
      "anti-müllerian hormone",
      "reserve ovariana"
    ],
    "searchTerms": [
      "anti-müllerian hormone",
      "AMH ovarian reserve",
      "ovarian reserve assessment",
      "AMH fertility",
      "AFC follicle count"
    ],
    "qaChecks": [
      "Alertar se AMH < 0 (erro)",
      "Alertar se AMH > 15 (possível erro ou SOP)",
      "Validar que coleta em dia 3 ciclo",
      "Considerar idade",
      "Correlacionar com contagem folículos antrais"
    ],
    "evidence": {
      "primary_source": "Broer SL et al. Anti-Müllerian hormone predicts ovarian response. Fertil Steril. 2009;92(6):1868-1874.",
      "radiopaedia_link": "https://radiopaedia.org/articles/anti-mullerian-hormone",
      "notes": "AMH prediz resposta ovariana. Valores variam por idade e laboratório.",
      "evidence_notes": "Fonte primária: Broer SL et al (Fertil Steril 2009). Marcador reserva ovariana."
    },
    "inputs": [
      {
        "key": "amh_ng_ml",
        "label": "AMH_ng_mL",
        "type": "number",
        "unit": "ng/mL",
        "required": true,
        "validRange": "0-15",
        "notes": "Hormônio Anti-Mülleriano (laboratorial)"
      }
    ],
    "outputUnits": [
      "ng/mL"
    ]
  },
  "PEL-0013": {
    "displayName": "Extraprostatic Extension",
    "category": "I - Pelve",
    "subcategory": "I6 - Próstata Avançada",
    "categoryCode": "I",
    "subareaCode": "I6",
    "functionName": "diagnose_extraprostatic_extension",
    "tags": [
      "#próstata",
      "#câncer",
      "#extensão",
      "#T3",
      "#RM"
    ],
    "synonyms": [
      "EPE",
      "extraprostatica extension",
      "extensão extraprostática"
    ],
    "searchTerms": [
      "extraprostatic extension",
      "EPE prostate cancer",
      "T3 prostate",
      "capsular extension",
      "prostate staging"
    ],
    "qaChecks": [
      "Validar presença EPE",
      "Documentar lateralidade",
      "Confirmar em T2 e DWI",
      "Considerar estadiamento completo",
      "Correlacionar com PSA/Gleason"
    ],
    "evidence": {
      "primary_source": "Turkbey B et al. Prostate Imaging Reporting Data System v2.1. Eur Urol. 2019;76(3):340-351.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-cancer-staging",
      "notes": "EPE = T3a. Importante para decisão terapêutica (cirurgia vs radiação).",
      "evidence_notes": "Fonte primária: Turkbey B et al (Eur Urol 2019). Critério PI-RADS para EPE."
    },
    "inputs": [
      {
        "key": "epe_presente",
        "label": "epe_presente",
        "type": "boolean",
        "required": true,
        "notes": "Extensão extraprostática presente?"
      },
      {
        "key": "lateralidade",
        "label": "lateralidade",
        "type": "enum",
        "required": true,
        "notes": "Lateralidade EPE"
      }
    ]
  },
  "PEL-0014": {
    "displayName": "Seminal Vesicle Invasion",
    "category": "I - Pelve",
    "subcategory": "I6 - Próstata Avançada",
    "categoryCode": "I",
    "subareaCode": "I6",
    "functionName": "diagnose_seminal_vesicle_invasion",
    "tags": [
      "#próstata",
      "#câncer",
      "#invasão",
      "#T4",
      "#RM"
    ],
    "synonyms": [
      "SVI",
      "seminal vesicle invasion",
      "invasão vesícula seminal"
    ],
    "searchTerms": [
      "seminal vesicle invasion",
      "SVI prostate cancer",
      "T4 prostate",
      "seminal vesicle",
      "prostate staging"
    ],
    "qaChecks": [
      "Validar presença SVI",
      "Documentar lateralidade",
      "Confirmar em T2 e DWI",
      "Considerar estadiamento completo",
      "Correlacionar com PSA/Gleason"
    ],
    "evidence": {
      "primary_source": "Turkbey B et al. Prostate Imaging Reporting Data System v2.1. Eur Urol. 2019;76(3):340-351.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-cancer-staging",
      "notes": "SVI = T3b. Pior prognóstico que EPE. Importante para decisão terapêutica.",
      "evidence_notes": "Fonte primária: Turkbey B et al (Eur Urol 2019). Critério PI-RADS para SVI."
    },
    "inputs": [
      {
        "key": "svi_presente",
        "label": "svi_presente",
        "type": "boolean",
        "required": true,
        "notes": "Invasão vesícula seminal presente?"
      },
      {
        "key": "lateralidade",
        "label": "lateralidade",
        "type": "enum",
        "required": true,
        "notes": "Lateralidade SVI"
      }
    ]
  },
  "PEL-0015": {
    "displayName": "Gleason Score Imaging",
    "category": "I - Pelve",
    "subcategory": "I6 - Próstata Avançada",
    "categoryCode": "I",
    "subareaCode": "I6",
    "functionName": "estimate_gleason_score_mri",
    "tags": [
      "#próstata",
      "#Gleason",
      "#grau",
      "#prognóstico",
      "#RM"
    ],
    "synonyms": [
      "Gleason score RM",
      "tumor grade",
      "grau tumoral"
    ],
    "searchTerms": [
      "Gleason score MRI",
      "prostate cancer grade",
      "tumor grading",
      "Gleason imaging",
      "grade assessment"
    ],
    "qaChecks": [
      "Validar cada score",
      "Confirmar em DWI, DCE, T2",
      "Documentar localização",
      "Considerar PI-RADS score",
      "Correlacionar com PSA/biópsia"
    ],
    "evidence": {
      "primary_source": "Turkbey B et al. Prostate Imaging Reporting Data System v2.1. Eur Urol. 2019;76(3):340-351.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-cancer-gleason-grading",
      "notes": "Estimativa Gleason por RM. Correlaciona com biópsia ~70-80%.",
      "evidence_notes": "Fonte primária: Turkbey B et al (Eur Urol 2019). Estimativa não-invasiva Gleason."
    },
    "inputs": [
      {
        "key": "dwi_score",
        "label": "dwi_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "1-5",
        "notes": "Score DWI (1-5)"
      },
      {
        "key": "dce_score",
        "label": "dce_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "0-3",
        "notes": "Score DCE (0-3)"
      },
      {
        "key": "t2_score",
        "label": "t2_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "1-5",
        "notes": "Score T2 (1-5)"
      }
    ]
  },
  "PEL-0016": {
    "displayName": "Prostate Cancer Gleason Grading",
    "category": "I - Pelve",
    "subcategory": "I1 - Próstata",
    "categoryCode": "I",
    "subareaCode": "I1",
    "functionName": "grade_prostate_cancer_gleason",
    "tags": [
      "#próstata",
      "#Gleason",
      "#grau",
      "#câncer",
      "#RM"
    ],
    "synonyms": [
      "Gleason grading",
      "tumor grade",
      "grau tumoral"
    ],
    "searchTerms": [
      "Gleason grading",
      "prostate cancer grade",
      "tumor grading MRI",
      "Gleason score",
      "grade assessment"
    ],
    "qaChecks": [
      "Validar padrões entre 3-5",
      "Confirmar que primário >= secundário",
      "Documentar localização",
      "Considerar número fragmentos",
      "Correlacionar com PSA/estadiamento"
    ],
    "evidence": {
      "primary_source": "Turkbey B et al. Prostate Imaging Reporting Data System v2.1. Eur Urol. 2019;76(3):340-351.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-cancer-gleason-grading",
      "notes": "Gleason 2017 (grupos 1-5). Importante para prognóstico e decisão terapêutica.",
      "evidence_notes": "Fonte primária: Turkbey B et al (Eur Urol 2019). Estimativa não-invasiva Gleason."
    },
    "inputs": [
      {
        "key": "gleason_primary",
        "label": "gleason_primary",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "3-5",
        "notes": "Padrão primário Gleason (3-5)"
      },
      {
        "key": "gleason_secondary",
        "label": "gleason_secondary",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "3-5",
        "notes": "Padrão secundário Gleason (3-5)"
      }
    ],
    "outputUnits": [
      "points"
    ]
  },
  "PEL-0017": {
    "displayName": "Uterine Artery Doppler",
    "category": "I - Pelve",
    "subcategory": "I2 - Útero",
    "categoryCode": "I",
    "subareaCode": "I2",
    "functionName": "measure_uterine_artery_doppler",
    "tags": [
      "#útero",
      "#artéria",
      "#doppler",
      "#perfusão",
      "#fertilidade"
    ],
    "synonyms": [
      "Uterine artery PI",
      "uterine artery RI",
      "resistência arterial uterina"
    ],
    "searchTerms": [
      "uterine artery doppler",
      "uterine artery PI",
      "uterine artery RI",
      "endometrial perfusion",
      "fertility doppler"
    ],
    "qaChecks": [
      "Validar RI entre 0-1",
      "Confirmar medições bilaterais",
      "Documentar presença/ausência notch",
      "Considerar idade gestacional",
      "Correlacionar com sintomas"
    ],
    "evidence": {
      "primary_source": "Steer CV et al. Transvaginal color flow doppler ultrasound oocyte retrieval. Lancet. 1992;339(8788):213-216.",
      "radiopaedia_link": "https://radiopaedia.org/articles/uterine-artery-doppler",
      "notes": "RI >0.58 ou notch = risco insuficiência placentária.",
      "evidence_notes": "Fonte primária: Steer CV et al (Lancet 1992). Doppler para avaliar perfusão."
    },
    "inputs": [
      {
        "key": "ri_arteria_uterina",
        "label": "RI_arteria_uterina",
        "type": "number",
        "unit": "ratio",
        "required": true,
        "validRange": "0-1",
        "notes": "Índice resistência artéria uterina"
      },
      {
        "key": "notch_diastolico",
        "label": "notch_diastolico",
        "type": "boolean",
        "required": true,
        "notes": "Notch diastólico presente?"
      }
    ],
    "outputUnits": [
      "ratio (0-1)"
    ]
  },
  "PEL-0018": {
    "displayName": "Bladder Outlet Obstruction Index",
    "category": "I - Pelve",
    "subcategory": "I3 - Bexiga",
    "categoryCode": "I",
    "subareaCode": "I3",
    "functionName": "calculate_bladder_outlet_obstruction_index",
    "tags": [
      "#bexiga",
      "#obstrução",
      "#BOO",
      "#urodinâmica",
      "#índice"
    ],
    "synonyms": [
      "BOO index",
      "obstruction index",
      "índice obstrução"
    ],
    "searchTerms": [
      "bladder outlet obstruction index",
      "BOO index",
      "obstruction index",
      "urodynamics",
      "pressure-flow"
    ],
    "qaChecks": [
      "Validar pressao > 0 cmH2O",
      "Validar fluxo > 0 mL/s",
      "Confirmar estudo urodinâmico completo",
      "Considerar sintomas (LUTS)",
      "Documentar contexto clínico"
    ],
    "evidence": {
      "primary_source": "Abrams P et al. Standardisation terminology lower urinary tract function. Neurourol Urodynam. 1998;17(5):443-447.",
      "radiopaedia_link": "https://radiopaedia.org/articles/bladder-outlet-obstruction",
      "notes": "BOO Index >40 = obstrução. Padrão ICS para diagnóstico urodinâmico.",
      "evidence_notes": "Fonte primária: Abrams P et al (Neurourol Urodyn 1998). Classificação BOO."
    },
    "inputs": [
      {
        "key": "pressao_detrusor_max",
        "label": "pressao_detrusor_max",
        "type": "number",
        "unit": "cmH2O",
        "required": true,
        "validRange": "0-200",
        "notes": "Pressão detrusor máxima (urodinâmica)"
      },
      {
        "key": "fluxo_urinario_max",
        "label": "fluxo_urinario_max",
        "type": "number",
        "unit": "mL/s",
        "required": true,
        "validRange": "0-50",
        "notes": "Fluxo urinário máximo"
      }
    ],
    "outputUnits": [
      "cmH2O"
    ]
  },
  "PEL-0019": {
    "displayName": "Rectal Cancer Depth of Invasion",
    "category": "I - Pelve",
    "subcategory": "I4 - Reto/Cólon",
    "categoryCode": "I",
    "subareaCode": "I4",
    "functionName": "measure_rectal_cancer_depth",
    "tags": [
      "#reto",
      "#câncer",
      "#profundidade",
      "#T-stage",
      "#RM"
    ],
    "synonyms": [
      "Tumor depth",
      "T stage",
      "profundidade invasão"
    ],
    "searchTerms": [
      "rectal cancer depth",
      "T stage rectal",
      "tumor depth invasion",
      "rectal cancer staging",
      "depth assessment"
    ],
    "qaChecks": [
      "Validar profundidade >= 0 mm",
      "Validar medição em cortes axiais",
      "Documentar localização exata",
      "Considerar estadiamento completo",
      "Correlacionar com CRM"
    ],
    "evidence": {
      "primary_source": "Beets-Tan RG et al. Magnetic resonance imaging rectum staging. Eur Radiol. 2000;10(12):1886-1895.",
      "radiopaedia_link": "https://radiopaedia.org/articles/rectal-cancer-staging",
      "notes": "Profundidade >5 mm = T3. Importante para decisão terapêutica.",
      "evidence_notes": "Fonte primária: Beets-Tan RG et al (Eur Radiol 2000). Profundidade para T stage."
    },
    "inputs": [
      {
        "key": "profundidade_invasao",
        "label": "profundidade_invasao",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-50",
        "notes": "Profundidade invasão tumor além muscular própria"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "PEL-0020": {
    "displayName": "Rectal Cancer Lymph Node Staging",
    "category": "I - Pelve",
    "subcategory": "I4 - Reto/Cólon",
    "categoryCode": "I",
    "subareaCode": "I4",
    "functionName": "classify_lymph_node_staging",
    "tags": [
      "#reto",
      "#câncer",
      "#linfonodos",
      "#N-stage",
      "#RM"
    ],
    "synonyms": [
      "Lymph node staging",
      "N stage",
      "estadiamento linfonodos"
    ],
    "searchTerms": [
      "rectal cancer lymph node",
      "N stage rectal",
      "nodal staging",
      "lymph node assessment",
      "rectal cancer nodes"
    ],
    "qaChecks": [
      "Validar contagem linfonodos",
      "Documentar localização",
      "Confirmar critérios tamanho (>9 mm eixo curto)",
      "Considerar estadiamento completo",
      "Correlacionar com T-stage"
    ],
    "evidence": {
      "primary_source": "Beets-Tan RG et al. Magnetic resonance imaging rectum staging. Eur Radiol. 2000;10(12):1886-1895.",
      "radiopaedia_link": "https://radiopaedia.org/articles/rectal-cancer-staging",
      "notes": "N-stage baseado em número linfonodos. Importante para prognóstico.",
      "evidence_notes": "Fonte primária: Beets-Tan RG et al (Eur Radiol 2000). Linfonodos para N stage."
    },
    "inputs": [
      {
        "key": "numero_linfonodos",
        "label": "numero_linfonodos",
        "type": "number",
        "unit": "count",
        "required": true,
        "validRange": "0-50",
        "notes": "Número linfonodos regionais envolvidos"
      },
      {
        "key": "diametro_max",
        "label": "diametro_max",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-50",
        "notes": "Maior diâmetro linfonodo (eixo curto)"
      }
    ]
  },
  "THX-0001": {
    "displayName": "Pleural Effusion Volume (CT)",
    "category": "B - Tórax",
    "subcategory": "B1 - Derrame Pleural",
    "categoryCode": "B",
    "subareaCode": "B1",
    "functionName": "calculate_pleural_effusion_volume_ct",
    "tags": [
      "#derrame-pleural",
      "#volume",
      "#TC",
      "#fórmula",
      "#estimativa"
    ],
    "synonyms": [
      "Effusion volume formula",
      "pleural fluid quantification"
    ],
    "searchTerms": [
      "pleural effusion volume CT",
      "effusion volume formula",
      "pleural fluid quantification",
      "Goecke formula",
      "pleural effusion estimation"
    ],
    "qaChecks": [
      "Alertar se effusion_volume < 0 (erro matemático)",
      "Validar medições em corte axial",
      "Verificar se derrame unilateral ou bilateral",
      "Alertar se profundidade > 200 mm (possível erro)",
      "Considerar trombo mural que pode superestimar volume"
    ],
    "evidence": {
      "primary_source": "Goecke T, Hazlinger B. New formula quantification pleural effusions CT. Eur Radiol. 1999;9(8):1547-1549.",
      "radiopaedia_link": "https://radiopaedia.org/articles/pleural-effusion-volume-ultrasound",
      "notes": "Fórmula polinomial validada. Mais acurada que fórmula simples V = d² × l.",
      "evidence_notes": "Fonte primária: Goecke T, Hazlinger B (Eur Radiol 1999). Fórmula polinomial validada para TC."
    },
    "inputs": [
      {
        "key": "profundidade_max",
        "label": "profundidade_max",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-200",
        "notes": "Profundidade máxima derrame (eixo transversal)"
      },
      {
        "key": "comprimento_max",
        "label": "comprimento_max",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-300",
        "notes": "Comprimento máximo derrame (eixo longitudinal)"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "THX-0002": {
    "displayName": "RV:LV Ratio",
    "category": "B - Tórax",
    "subcategory": "B2 - TEP",
    "categoryCode": "B",
    "subareaCode": "B2",
    "functionName": "calculate_rv_lv_ratio",
    "tags": [
      "#TEP",
      "#ventrículo",
      "#razão",
      "#dilatação",
      "#prognóstico"
    ],
    "synonyms": [
      "RV/LV ratio",
      "RV dilatation index"
    ],
    "searchTerms": [
      "RV LV ratio",
      "right ventricle left ventricle ratio",
      "RV dilatation CT",
      "CTPA RV LV",
      "right heart strain"
    ],
    "qaChecks": [
      "Alertar se rv_lv_ratio < 0.5 (possível erro)",
      "Alertar se rv_lv_ratio > 2.0 (possível erro)",
      "Validar medições no corte correto (axial, nível 4 câmaras)",
      "Verificar se não há artefato de movimento",
      "Confirmar que medições são transversais (não sagitais)"
    ],
    "evidence": {
      "primary_source": "Qanadli SD et al. New CT index quantify arterial obstruction PE. AJR. 2001;176(6):1415-1420.",
      "radiopaedia_link": "https://radiopaedia.org/articles/right-heart-strain",
      "notes": "RV:LV >1.0 associado a disfunção RV e pior prognóstico em TEP. Não diagnóstico isoladamente.",
      "evidence_notes": "Fonte primária: Qanadli SD et al (AJR 2001). Índice prognóstico em TEP."
    },
    "inputs": [
      {
        "key": "d_rv",
        "label": "d_RV",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro RV (eixo transversal, nível 4 câmaras)"
      },
      {
        "key": "d_lv",
        "label": "d_LV",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro LV (eixo transversal, nível 4 câmaras)"
      }
    ],
    "outputUnits": [
      "ratio"
    ]
  },
  "THX-0003": {
    "displayName": "PA:Aorta Ratio",
    "category": "B - Tórax",
    "subcategory": "B3 - Hipertensão Pulmonar",
    "categoryCode": "B",
    "subareaCode": "B3",
    "functionName": "calculate_pa_aorta_ratio",
    "tags": [
      "#hipertensão-pulmonar",
      "#PA",
      "#aorta",
      "#razão",
      "#rastreamento"
    ],
    "synonyms": [
      "PA:Ao ratio",
      "mPA diameter ratio"
    ],
    "searchTerms": [
      "PA aorta ratio",
      "pulmonary artery aorta ratio",
      "PA:Ao",
      "pulmonary hypertension CT",
      "main PA diameter"
    ],
    "qaChecks": [
      "Alertar se pa_aorta_ratio < 0.5 (possível erro)",
      "Alertar se pa_aorta_ratio > 2.0 (possível erro)",
      "Validar medições no corte correto (bifurcação PA)",
      "Verificar se não há artefato de movimento",
      "Complementar com avaliação clínica e ecocardiografia"
    ],
    "evidence": {
      "primary_source": "Ng CS et al. Effect pulmonary hypertension PA diameter. Chest. 1999;115(3):646-651.",
      "radiopaedia_link": "https://radiopaedia.org/articles/pulmonary-hypertension-1",
      "notes": "PA/Ao >0.9 é 90º percentil normal. Não diagnóstico isoladamente; complementar com ecocardiografia.",
      "evidence_notes": "Fonte primária: Ng CS et al (Chest 1999). Rastreamento PH por TC."
    },
    "inputs": [
      {
        "key": "d_pa",
        "label": "d_PA",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro PA principal (nível bifurcação)"
      },
      {
        "key": "d_ao",
        "label": "d_Ao",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro aorta ascendente (mesmo nível)"
      }
    ],
    "outputUnits": [
      "ratio"
    ]
  },
  "THX-0004": {
    "displayName": "Fleischner Nodule Follow-up 2017",
    "category": "B - Tórax",
    "subcategory": "B4 - Nódulo Pulmonar",
    "categoryCode": "B",
    "subareaCode": "B4",
    "functionName": "classify_nodule_fleischner_2017",
    "tags": [
      "#nódulo",
      "#pulmão",
      "#follow-up",
      "#Fleischner",
      "#TC"
    ],
    "synonyms": [
      "Fleischner 2017",
      "nodule follow-up criteria"
    ],
    "searchTerms": [
      "Fleischner guidelines",
      "nodule follow-up",
      "lung nodule classification",
      "CT nodule management",
      "pulmonary nodule"
    ],
    "qaChecks": [
      "Alertar se tamanho_mm > 30 (possível massa, não nódulo)",
      "Validar classificação tipo_nodulo",
      "Verificar se nódulo em pulmão (não mediastino/pleura)",
      "Considerar história tabagismo para risco",
      "Documentar localização exata (lobo, segmento)"
    ],
    "evidence": {
      "primary_source": "MacMahon H et al. Guidelines Management Incidental Pulmonary Nodules CT. Radiology. 2017;284(1):228-243.",
      "radiopaedia_link": "https://radiopaedia.org/articles/fleischner-society-pulmonary-nodule-recommendations-1",
      "notes": "Diretrizes Fleischner 2017 atualizadas. Baseadas em risco malignidade.",
      "evidence_notes": "Fonte primária: MacMahon H et al (Radiology 2017). Diretrizes atualizadas Fleischner Society."
    },
    "inputs": [
      {
        "key": "tamanho_mm",
        "label": "tamanho_mm",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-30",
        "notes": "Maior diâmetro nódulo"
      },
      {
        "key": "tipo_nodulo",
        "label": "tipo_nodulo",
        "type": "enum",
        "required": true,
        "notes": "Classificação de densidade"
      },
      {
        "key": "risco_paciente",
        "label": "risco_paciente",
        "type": "enum",
        "required": true,
        "notes": "Risco clínico (idade, tabagismo, etc)"
      }
    ]
  },
  "THX-0005": {
    "displayName": "Emphysema Index LAA%",
    "category": "B - Tórax",
    "subcategory": "B5 - Enfisema",
    "categoryCode": "B",
    "subareaCode": "B5",
    "functionName": "calculate_emphysema_index_laa",
    "tags": [
      "#enfisema",
      "#LAA",
      "#-950HU",
      "#quantificação",
      "#TC"
    ],
    "synonyms": [
      "LAA%",
      "-950 HU threshold",
      "emphysema quantification"
    ],
    "searchTerms": [
      "emphysema index",
      "LAA percent",
      "low attenuation area",
      "-950 HU",
      "CT emphysema quantification"
    ],
    "qaChecks": [
      "Alertar se laa_percentage < 0 ou > 100 (erro)",
      "Validar TC baixa dose (não pode ser dose alta)",
      "Verificar se inspiração completa (não expiração)",
      "Confirmar segmentação pulmão correta",
      "Alertar se outras doenças presentes (fibrose, aspergiloma)"
    ],
    "evidence": {
      "primary_source": "Gevenois PA et al. Comparison computed density macroscopic morphometry emphysema. AJR. 1995;165(3):553-558.",
      "radiopaedia_link": "https://radiopaedia.org/articles/emphysema",
      "notes": "Threshold -950 HU padrão para enfisema. Correlaciona com função pulmonar (FEV1).",
      "evidence_notes": "Fonte primária: Gevenois PA et al (AJR 1995). Threshold -950 HU padrão para enfisema."
    },
    "inputs": [
      {
        "key": "voxels_950_hu",
        "label": "voxels_950_HU",
        "type": "number",
        "unit": "count",
        "required": true,
        "validRange": "0-1000000",
        "notes": "Número de voxels ≤-950 HU"
      },
      {
        "key": "voxels_totais_pulmao",
        "label": "voxels_totais_pulmao",
        "type": "number",
        "unit": "count",
        "required": true,
        "validRange": "0-1000000",
        "notes": "Número total de voxels pulmão"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "THX-0006": {
    "displayName": "PESI Score",
    "category": "B - Tórax",
    "subcategory": "B2 - TEP",
    "categoryCode": "B",
    "subareaCode": "B2",
    "functionName": "calculate_pesi_score",
    "tags": [
      "#TEP",
      "#PESI",
      "#score",
      "#prognóstico",
      "#risco"
    ],
    "synonyms": [
      "Pulmonary Embolism Severity Index",
      "PE severity"
    ],
    "searchTerms": [
      "PESI score",
      "pulmonary embolism severity index",
      "PE risk stratification",
      "PESI calculator",
      "PE prognosis"
    ],
    "qaChecks": [
      "Alertar se pesi_score < 0 (erro)",
      "Validar FC entre 0-200 bpm",
      "Validar PAS entre 0-300 mmHg",
      "Validar FR entre 0-100 respirações/min",
      "Validar temperatura entre 30-45°C",
      "Validar SaO2 entre 0-100%"
    ],
    "evidence": {
      "primary_source": "Aujesky D et al. Derivation validation prognostic model PE. Am J Respir Crit Care Med. 2005;172(8):1041-1046.",
      "radiopaedia_link": "https://radiopaedia.org/articles/pulmonary-embolism-severity-index-pesi",
      "notes": "Score clínico validado para estratificar risco TEP. Existe sPESI (simplificada).",
      "evidence_notes": "Fonte primária: Aujesky D et al (Am J Respir Crit Care Med 2005). Score clínico validado para TEP."
    },
    "inputs": [
      {
        "key": "idade",
        "label": "idade",
        "type": "number",
        "unit": "years",
        "required": true,
        "validRange": "0-120",
        "notes": "Idade do paciente"
      },
      {
        "key": "sexo",
        "label": "sexo",
        "type": "enum",
        "required": true,
        "notes": "Sexo (M=masculino, F=feminino)"
      },
      {
        "key": "fc",
        "label": "FC",
        "type": "number",
        "unit": "bpm",
        "required": true,
        "validRange": "0-200",
        "notes": "Frequência cardíaca"
      },
      {
        "key": "pas",
        "label": "PAS",
        "type": "number",
        "unit": "mmHg",
        "required": true,
        "validRange": "0-300",
        "notes": "Pressão arterial sistólica"
      },
      {
        "key": "fr",
        "label": "FR",
        "type": "number",
        "unit": "respiracoes/min",
        "required": true,
        "validRange": "0-100",
        "notes": "Frequência respiratória"
      },
      {
        "key": "temperatura",
        "label": "temperatura",
        "type": "number",
        "unit": "°C",
        "required": true,
        "validRange": "30-45",
        "notes": "Temperatura corporal"
      },
      {
        "key": "consciencia_alterada",
        "label": "consciencia_alterada",
        "type": "boolean",
        "required": true,
        "notes": "Consciência alterada?"
      },
      {
        "key": "sao2",
        "label": "SaO2",
        "type": "number",
        "unit": "\"%\"",
        "required": true,
        "validRange": "0-100",
        "notes": "Saturação O2"
      },
      {
        "key": "icc",
        "label": "ICC",
        "type": "boolean",
        "required": true,
        "notes": "Insuficiência cardíaca?"
      },
      {
        "key": "dpoc",
        "label": "DPOC",
        "type": "boolean",
        "required": true,
        "notes": "DPOC?"
      }
    ],
    "outputUnits": [
      "points"
    ]
  },
  "THX-0007": {
    "displayName": "Pleural Effusion US Volume",
    "category": "B - Tórax",
    "subcategory": "B1 - Derrame Pleural",
    "categoryCode": "B",
    "subareaCode": "B1",
    "tags": [
      "#derrame-pleural",
      "#volume",
      "#ultrassom",
      "#estimativa"
    ],
    "synonyms": [
      "Effusion volume ultrasound",
      "pleural fluid quantification"
    ],
    "searchTerms": [
      "pleural effusion ultrasound volume",
      "effusion US quantification",
      "pleural fluid US",
      "effusion measurement US"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Eibenberger KL et al (Chest 1994). Estimativa volume derrame por US."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "THX-0008": {
    "displayName": "Main PA Diameter",
    "category": "B - Tórax",
    "subcategory": "B3 - Hipertensão Pulmonar",
    "categoryCode": "B",
    "subareaCode": "B3",
    "tags": [
      "#hipertensão-pulmonar",
      "#PA",
      "#diâmetro",
      "#rastreamento"
    ],
    "synonyms": [
      "Main pulmonary artery diameter",
      "mPA",
      "central PA"
    ],
    "searchTerms": [
      "main pulmonary artery diameter",
      "mPA diameter",
      "PA diameter cutoff",
      "pulmonary hypertension CT"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Ng CS et al (Chest 1999). Valores normais PA por sexo."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "THX-0009": {
    "displayName": "Lung-RADS Nodule Classification",
    "category": "B - Tórax",
    "subcategory": "B4 - Nódulo Pulmonar",
    "categoryCode": "B",
    "subareaCode": "B4",
    "tags": [
      "#nódulo",
      "#pulmão",
      "#Lung-RADS",
      "#screening",
      "#classificação"
    ],
    "synonyms": [
      "Lung-RADS",
      "lung nodule classification",
      "screening"
    ],
    "searchTerms": [
      "Lung-RADS",
      "lung nodule screening",
      "LDCT nodule classification",
      "Lung-RADS score",
      "CT screening lung"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Aberle DR et al (NEJM 2011). Sistema Lung-RADS para screening."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "THX-0010": {
    "displayName": "Lung Density Percentile",
    "category": "B - Tórax",
    "subcategory": "B5 - Enfisema",
    "categoryCode": "B",
    "subareaCode": "B5",
    "tags": [
      "#enfisema",
      "#densidade",
      "#percentil",
      "#quantificação",
      "#TC"
    ],
    "synonyms": [
      "15th percentile",
      "lung density",
      "emphysema severity"
    ],
    "searchTerms": [
      "lung density percentile",
      "15th percentile",
      "emphysema density",
      "lung attenuation",
      "density histogram"
    ],
    "qaChecks": [],
    "evidence": {
      "evidence_notes": "Fonte primária: Gevenois PA et al (AJR 1995). Complementa LAA% para avaliação enfisema."
    },
    "todos": [
      "inputs_missing",
      "calc_block_missing"
    ]
  },
  "TIR-0001": {
    "displayName": "ACR TI-RADS",
    "category": "H - Tireoide",
    "subcategory": "H1 - Nódulo Tireoidiano",
    "categoryCode": "H",
    "subareaCode": "H1",
    "functionName": "classify_thyroid_nodule_tirads",
    "tags": [
      "#tireoide",
      "#nódulo",
      "#TI-RADS",
      "#classificação",
      "#FNA"
    ],
    "synonyms": [
      "TI-RADS",
      "thyroid nodule classification"
    ],
    "searchTerms": [
      "ACR TI-RADS",
      "thyroid nodule classification",
      "TI-RADS score",
      "thyroid US classification",
      "FNA criteria thyroid"
    ],
    "qaChecks": [
      "Validar cada característica",
      "Verificar se avaliação completa",
      "Documentar tamanho nódulo",
      "Alertar se múltiplos nódulos",
      "Confirmar que é nódulo tireoidiano (não linfonodo)"
    ],
    "evidence": {
      "primary_source": "Tessler FN et al. ACR Thyroid Nodule Imaging Reporting Data System. J Am Coll Radiol. 2017;14(5):587-595.",
      "radiopaedia_link": "https://radiopaedia.org/articles/acr-thyroid-imaging-reporting-and-data-system-acr-ti-rads",
      "notes": "ACR TI-RADS para classificação nódulos tireoidianos. Baseado em risco malignidade.",
      "evidence_notes": "Fonte primária: Tessler FN et al (J Am Coll Radiol 2017). Sistema ACR para nódulos tireoidianos."
    },
    "inputs": [
      {
        "key": "composicao",
        "label": "composicao",
        "type": "enum",
        "required": true,
        "notes": "Composição nódulo"
      },
      {
        "key": "ecogenicidade",
        "label": "ecogenicidade",
        "type": "enum",
        "required": true,
        "notes": "Ecogenicidade relativa"
      },
      {
        "key": "forma",
        "label": "forma",
        "type": "enum",
        "required": true,
        "notes": "Forma (wider-than-tall vs taller-than-wide)"
      },
      {
        "key": "margens",
        "label": "margens",
        "type": "enum",
        "required": true,
        "notes": "Margens nódulo"
      },
      {
        "key": "focos_ecogenicos",
        "label": "focos_ecogenicos",
        "type": "enum",
        "required": true,
        "notes": "Focos ecogênicos (calcificação)"
      }
    ]
  },
  "TIR-0002": {
    "displayName": "Thyroid Volume Ellipsoid",
    "category": "H - Tireoide",
    "subcategory": "H2 - Tireoide",
    "categoryCode": "H",
    "subareaCode": "H2",
    "functionName": "calculate_thyroid_volume_ellipsoid",
    "tags": [
      "#tireoide",
      "#volume",
      "#elipsoide",
      "#bócio",
      "#medição"
    ],
    "synonyms": [
      "Thyroid volume",
      "gland volume"
    ],
    "searchTerms": [
      "thyroid volume",
      "thyroid gland volume",
      "thyroid measurement",
      "goiter volume",
      "ellipsoid formula thyroid"
    ],
    "qaChecks": [
      "Alertar se volume < 5 mL (possível erro)",
      "Alertar se volume > 100 mL (possível erro)",
      "Validar medições em três planos perpendiculares",
      "Verificar se fórmula elipsoide apropriada",
      "Considerar ingestão iodo e idade"
    ],
    "evidence": {
      "primary_source": "Knobel M, Medeiros-Neto G. Outline inherited disorders thyroid hormone pathway. Thyroid. 2003;13(8):771-801.",
      "radiopaedia_link": "https://radiopaedia.org/articles/thyroid-volume",
      "notes": "Fórmula elipsoide para volume tireoidiano. Valores variam por idade, sexo e ingestão iodo.",
      "evidence_notes": "Fonte primária: Knobel M, Medeiros-Neto G (Thyroid 2003). Valores normais volume tireoidiano."
    },
    "inputs": [
      {
        "key": "l_rd",
        "label": "L_RD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Comprimento lobo direito"
      },
      {
        "key": "w_rd",
        "label": "W_RD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Largura lobo direito"
      },
      {
        "key": "h_rd",
        "label": "H_RD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura lobo direito"
      },
      {
        "key": "l_ld",
        "label": "L_LD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Comprimento lobo esquerdo"
      },
      {
        "key": "w_ld",
        "label": "W_LD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Largura lobo esquerdo"
      },
      {
        "key": "h_ld",
        "label": "H_LD",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Espessura lobo esquerdo"
      },
      {
        "key": "v_istmo",
        "label": "V_istmo",
        "type": "number",
        "unit": "mL",
        "required": false,
        "validRange": "0-5",
        "notes": "Volume istmo (opcional)"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "URO-0001": {
    "displayName": "Prostate Volume Ellipsoid",
    "category": "F - Uro/Rim",
    "subcategory": "F1 - Próstata",
    "categoryCode": "F",
    "subareaCode": "F1",
    "functionName": "calculate_prostate_volume_ellipsoid",
    "tags": [
      "#próstata",
      "#volume",
      "#elipsoide",
      "#BPH",
      "#PSA"
    ],
    "synonyms": [
      "Prostate volume",
      "PV"
    ],
    "searchTerms": [
      "prostate volume",
      "prostate ellipsoid formula",
      "PSA density",
      "prostate measurement",
      "BPH volume"
    ],
    "qaChecks": [
      "Alertar se volume < 10 mL (possível erro)",
      "Alertar se volume > 200 mL (possível erro)",
      "Validar medições em três planos perpendiculares",
      "Verificar se fórmula elipsoide apropriada",
      "Alertar se próstata muito irregular (fórmula menos acurada)"
    ],
    "evidence": {
      "primary_source": "Roehrborn CG et al. Efficacy safety dual inhibitor 5-alpha reductase. J Urol. 2002;169(6):2399-2405.",
      "radiopaedia_link": "https://radiopaedia.org/articles/benign-prostatic-hyperplasia",
      "notes": "Fórmula padrão volume prostático. Importante para cálculo PSA density.",
      "evidence_notes": "Fonte primária: Roehrborn CG et al (J Urol 2002). Fórmula padrão volume prostático."
    },
    "inputs": [
      {
        "key": "comprimento",
        "label": "comprimento",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Comprimento próstata (eixo sagital)"
      },
      {
        "key": "largura",
        "label": "largura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Largura próstata (eixo transversal)"
      },
      {
        "key": "altura",
        "label": "altura",
        "type": "number",
        "unit": "cm",
        "required": true,
        "validRange": "0-10",
        "notes": "Altura próstata (eixo ântero-posterior)"
      }
    ],
    "outputUnits": [
      "mL"
    ]
  },
  "URO-0002": {
    "displayName": "PI-RADS v2.1 Score",
    "category": "F - Uro/Rim",
    "subcategory": "F1 - Próstata",
    "categoryCode": "F",
    "subareaCode": "F1",
    "functionName": "classify_prostate_pirads_v2_1",
    "tags": [
      "#próstata",
      "#PI-RADS",
      "#RM",
      "#câncer",
      "#score"
    ],
    "synonyms": [
      "Prostate Imaging Reporting Data System",
      "PI-RADS"
    ],
    "searchTerms": [
      "PI-RADS v2.1",
      "prostate MRI score",
      "PI-RADS classification",
      "prostate cancer risk",
      "mpMRI prostate"
    ],
    "qaChecks": [
      "Validar scores T2, DWI, DCE corretos",
      "Verificar se RM multiparamétrica completa",
      "Confirmar localização lesão (zona)",
      "Alertar se artefatos presentes",
      "Documentar número e localização lesões"
    ],
    "evidence": {
      "primary_source": "Turkbey B et al. Prostate Imaging Reporting Data System v2.1. Eur Urol. 2019;76(3):340-351.",
      "radiopaedia_link": "https://radiopaedia.org/articles/prostate-imaging-reporting-and-data-system-pi-rads-2",
      "notes": "PI-RADS v2.1 versão atualizada. Guia decisão biopsia em câncer próstata.",
      "evidence_notes": "Fonte primária: Turkbey B et al (Eur Urol 2019). Versão atualizada PI-RADS."
    },
    "inputs": [
      {
        "key": "t2_score",
        "label": "t2_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "1-5",
        "notes": "Score T2 (1-5)"
      },
      {
        "key": "dwi_score",
        "label": "dwi_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "1-5",
        "notes": "Score DWI (1-5)"
      },
      {
        "key": "dce_score",
        "label": "dce_score",
        "type": "number",
        "unit": "points",
        "required": true,
        "validRange": "0-3",
        "notes": "Score DCE (0-3; 0=ausente)"
      },
      {
        "key": "localizacao",
        "label": "localizacao",
        "type": "enum",
        "required": true,
        "notes": "Localização lesão"
      }
    ]
  },
  "VASC-0001": {
    "displayName": "Resistive Index (RI)",
    "category": "A - Vascular",
    "subcategory": "A1 - Carótidas/Vertebrais",
    "categoryCode": "A",
    "subareaCode": "A1",
    "functionName": "calculate_resistive_index",
    "tags": [
      "#doppler",
      "#resistencia",
      "#indice",
      "#arterial",
      "#fluxo",
      "#carótida"
    ],
    "synonyms": [
      "Pourcelot Index",
      "IR"
    ],
    "searchTerms": [
      "resistive index",
      "pourcelot index",
      "doppler resistance",
      "RI vascular",
      "arterial resistance ultrasound"
    ],
    "qaChecks": [
      "Validar PSV > EDV (sempre em artérias)",
      "Alertar se PSV < 0.1 m/s (possível erro de medição)",
      "Alertar se RI > 1.0 (erro matemático ou medição invertida)",
      "Verificar ângulo Doppler <60° (não validável por fórmula)",
      "Alertar se EDV negativo (erro de medição)"
    ],
    "evidence": {
      "primary_source": "McNaughton D, Abu-Yousef M. Doppler US of the Liver Made Simple. Radiographics. 2011;31(1):161-88.",
      "radiopaedia_link": "https://radiopaedia.org/articles/resistive-index-vascular-ultrasound",
      "notes": "RI é independente de ângulo de insonação (razão adimensional). Validado em múltiplos territórios vasculares.",
      "evidence_notes": "Fonte primária: McNaughton D, Abu-Yousef M (Radiographics 2011). Índice amplamente validado em prática clínica."
    },
    "inputs": [
      {
        "key": "psv",
        "label": "PSV (Peak Systolic Velocity)",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-5",
        "notes": "Velocidade sistólica máxima medida em Doppler pulsado"
      },
      {
        "key": "edv",
        "label": "EDV (End-Diastolic Velocity)",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-5",
        "notes": "Velocidade diastólica final medida em Doppler pulsado"
      }
    ],
    "outputUnits": [
      "ratio (0-1)",
      "%"
    ]
  },
  "VASC-0002": {
    "displayName": "Pulsatility Index (PI)",
    "category": "A - Vascular",
    "subcategory": "A1 - Carótidas/Vertebrais",
    "categoryCode": "A",
    "subareaCode": "A1",
    "functionName": "calculate_pulsatility_index",
    "tags": [
      "#doppler",
      "#pulsatilidade",
      "#indice",
      "#arterial",
      "#fluxo"
    ],
    "synonyms": [
      "PI",
      "IP"
    ],
    "searchTerms": [
      "pulsatility index",
      "doppler pulsatility",
      "PI ultrasound",
      "arterial pulsatility",
      "flow pulsatility"
    ],
    "qaChecks": [
      "Alertar se PI < 0.5 (possível erro)",
      "Alertar se PI > 5.0 (possível erro)",
      "Validar V_mean coerente com PSV/EDV",
      "Comparar com RI para consistência"
    ],
    "evidence": {
      "primary_source": "Boote E. AAPM/RSNA Physics Tutorial. Radiographics. 2003;23(5):1315-27.",
      "radiopaedia_link": "https://radiopaedia.org/articles/pulsatility-index-ultrasound",
      "notes": "PI menos específico que RI; complementar com RI para diagnóstico.",
      "evidence_notes": "Fonte primária: Boote E (Radiographics 2003). Complementa RI para avaliação vascular."
    },
    "inputs": [
      {
        "key": "psv",
        "label": "PSV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-5",
        "notes": "Velocidade sistólica máxima"
      },
      {
        "key": "edv",
        "label": "EDV",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-5",
        "notes": "Velocidade diastólica final"
      },
      {
        "key": "v_mean",
        "label": "V_mean",
        "type": "number",
        "unit": "m/s",
        "required": true,
        "validRange": "0-5",
        "notes": "Velocidade média (calculada pelo Doppler ou manual)"
      }
    ],
    "outputUnits": [
      "ratio"
    ]
  },
  "VASC-0003": {
    "displayName": "NASCET Criteria",
    "category": "A - Vascular",
    "subcategory": "A1 - Carótidas/Vertebrais",
    "categoryCode": "A",
    "subareaCode": "A1",
    "functionName": "calculate_nascet_stenosis",
    "tags": [
      "#estenose",
      "#carótida",
      "#diâmetro",
      "#classificação",
      "#NASCET"
    ],
    "synonyms": [
      "North American Symptomatic Carotid Endarterectomy Trial"
    ],
    "searchTerms": [
      "NASCET criteria",
      "carotid stenosis percentage",
      "diameter stenosis formula",
      "carotid endarterectomy",
      "NASCET classification"
    ],
    "qaChecks": [
      "Alertar se stenosis_percent > 100 (erro matemático)",
      "Alertar se d_stenosis == d_distal (sem estenose)",
      "Validar medições em mesmo plano (axial)",
      "Verificar se medições evitam trombo mural"
    ],
    "evidence": {
      "primary_source": "NASCET Collaborators. NEJM. 1991;325(7):445-453.",
      "radiopaedia_link": "https://radiopaedia.org/articles/nascet-criteria",
      "notes": "Padrão ouro para classificação estenose carotídea. Valores NASCET ~10% menores que ECST.",
      "evidence_notes": "Fonte primária: NEJM 1991. Padrão ouro para classificação estenose carotídea."
    },
    "inputs": [
      {
        "key": "d_stenosis",
        "label": "d_stenosis",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Diâmetro mínimo na estenose"
      },
      {
        "key": "d_distal",
        "label": "d_distal",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Diâmetro normal distal (ICA distal)"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "VASC-0004": {
    "displayName": "Renal Artery Stenosis Doppler Criteria",
    "category": "A - Vascular",
    "subcategory": "A3 - Artérias Renais",
    "categoryCode": "A",
    "subareaCode": "A3",
    "functionName": "calculate_ras_doppler_criteria",
    "tags": [
      "#estenose",
      "#artéria-renal",
      "#doppler",
      "#RAR",
      "#critério"
    ],
    "synonyms": [
      "RAR",
      "Renal-Aortic Ratio",
      "PSV renal"
    ],
    "searchTerms": [
      "renal artery stenosis",
      "RAR renal aortic ratio",
      "PSV renal criteria",
      "renal doppler",
      "RAS duplex"
    ],
    "qaChecks": [
      "Alertar se PSV_renal < 50 cm/s (possível erro)",
      "Alertar se RAR < 1.0 (PSV aorta > PSV renal; erro)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Alertar se débito cardíaco muito baixo (afeta PSV)"
    ],
    "evidence": {
      "primary_source": "Olin JW et al. USRFMD Registry. Circ Cardiovasc Interv. 2012;5(3):432-438.",
      "radiopaedia_link": "https://radiopaedia.org/articles/renal-artery-stenosis",
      "notes": "Critérios validados para estenose ≥60%. PSV >180 ou RAR >3.5 para estenose significativa.",
      "evidence_notes": "Fonte primária: Olin JW et al (Circ Cardiovasc Interv 2012). Critérios validados para RAS ≥60%."
    },
    "inputs": [
      {
        "key": "psv_renal",
        "label": "PSV_renal",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-400",
        "notes": "PSV artéria renal"
      },
      {
        "key": "psv_aorta",
        "label": "PSV_aorta",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-200",
        "notes": "PSV aorta proximal"
      }
    ]
  },
  "VASC-0005": {
    "displayName": "AAA Growth Rate",
    "category": "A - Vascular",
    "subcategory": "A2 - Aorta",
    "categoryCode": "A",
    "subareaCode": "A2",
    "functionName": "calculate_aaa_growth_rate",
    "tags": [
      "#aneurisma",
      "#aorta",
      "#crescimento",
      "#follow-up",
      "#diâmetro"
    ],
    "synonyms": [
      "Annual growth",
      "growth rate"
    ],
    "searchTerms": [
      "AAA growth rate",
      "aortic aneurysm growth",
      "annual growth mm",
      "AAA follow-up",
      "aneurysm surveillance"
    ],
    "qaChecks": [
      "Alertar se d_atual < d_anterior (possível erro de medição)",
      "Alertar se growth_rate < -2 (regressão; verificar técnica)",
      "Validar intervalo_anos > 0.25 (mínimo 3 meses)",
      "Alertar se growth_rate > 10 mm/ano (crescimento muito rápido; verificar)",
      "Verificar se medições em eixo transversal (AP)"
    ],
    "evidence": {
      "primary_source": "Lederle FA et al. ADAM Trial. NEJM. 2002;346(19):1437-1444.",
      "radiopaedia_link": "https://radiopaedia.org/articles/abdominal-aortic-aneurysm",
      "notes": "Estudo ADAM: taxa média ~1.9 mm/ano (2.8-3.9 cm); ~2.7 mm/ano (4.0-4.5 cm).",
      "evidence_notes": "Fonte primária: Lederle FA et al (NEJM 2002). Estudo ADAM - referência para monitoramento AAA."
    },
    "inputs": [
      {
        "key": "d_atual",
        "label": "d_atual",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro máximo AAA atual"
      },
      {
        "key": "d_anterior",
        "label": "d_anterior",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro máximo AAA anterior"
      },
      {
        "key": "intervalo_anos",
        "label": "intervalo_anos",
        "type": "number",
        "unit": "years",
        "required": true,
        "validRange": "0.1-10",
        "notes": "Intervalo entre exames (em anos)"
      }
    ],
    "outputUnits": [
      "mm/ano",
      "mm",
      "%"
    ]
  },
  "VASC-0006": {
    "displayName": "Stanford Classification Aortic Dissection",
    "category": "A - Vascular",
    "subcategory": "A2 - Aorta",
    "categoryCode": "A",
    "subareaCode": "A2",
    "functionName": "classify_aortic_dissection_stanford",
    "tags": [
      "#dissecção",
      "#aorta",
      "#classificação",
      "#Stanford",
      "#tipo-A-B"
    ],
    "synonyms": [
      "Stanford Type A/B",
      "aortic dissection classification"
    ],
    "searchTerms": [
      "Stanford classification aortic dissection",
      "Type A Type B dissection",
      "aortic dissection classification",
      "ascending aorta dissection"
    ],
    "qaChecks": [
      "Verificar presença de flap intimal",
      "Confirmar laceração intimal (não confundir com artefato)",
      "Documentar extensão (proximal/distal)",
      "Verificar malperfusão (ramos aórticos)",
      "Alertar se dissecção intramural sem laceração visível (possível AIAD)"
    ],
    "evidence": {
      "primary_source": "Daily PO et al. Management acute aortic dissections. Ann Thorac Surg. 1970;10(3):237-247.",
      "radiopaedia_link": "https://radiopaedia.org/articles/stanford-classification-of-aortic-dissection-1",
      "notes": "Classificação clássica; determina urgência cirúrgica. Type A = emergência cirúrgica.",
      "evidence_notes": "Fonte primária: Daily PO et al (Ann Thorac Surg 1970). Classificação clássica ainda em uso."
    },
    "inputs": [
      {
        "key": "envolve_ascendente",
        "label": "envolve_ascendente",
        "type": "boolean",
        "required": true,
        "notes": "Dissecção envolve aorta ascendente?"
      },
      {
        "key": "localizacao_lacera_o",
        "label": "localizacao_laceração",
        "type": "enum",
        "required": true,
        "notes": "Localização da laceração intimal"
      }
    ]
  },
  "VASC-0007": {
    "displayName": "IVC Collapsibility Index",
    "category": "A - Vascular",
    "subcategory": "A4 - Veias",
    "categoryCode": "A",
    "subareaCode": "A4",
    "functionName": "calculate_ivc_collapsibility_index",
    "tags": [
      "#veia",
      "#pressão-venosa",
      "#colapsabilidade",
      "#VCI",
      "#índice"
    ],
    "synonyms": [
      "IVC collapse index",
      "caval index"
    ],
    "searchTerms": [
      "IVC collapsibility",
      "inferior vena cava collapse",
      "caval index",
      "PVC estimation",
      "IVC diameter"
    ],
    "qaChecks": [
      "Alertar se CI < 0 ou > 100 (erro matemático)",
      "Verificar se medições em respiração espontânea",
      "Alertar se paciente em ventilação mecânica (CI pode estar falsamente baixo)",
      "Validar medição 2 cm abaixo confluência hepática",
      "Alertar se arritmia presente (afeta medições)"
    ],
    "evidence": {
      "primary_source": "Brennan JM et al. Handcarried ultrasound IVC diameter. Am J Emerg Med. 2007;25(2):155-161.",
      "radiopaedia_link": "https://radiopaedia.org/articles/inferior-vena-cava",
      "notes": "Método não-invasivo para estimativa PVC. Sensibilidade ~80% para PVC elevada.",
      "evidence_notes": "Fonte primária: Brennan JM et al (Am J Emerg Med 2007). Método não-invasivo estimativa PVC."
    },
    "inputs": [
      {
        "key": "d_max_inspiracao",
        "label": "d_max_inspiracao",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-30",
        "notes": "Diâmetro máximo VCI em inspiração"
      },
      {
        "key": "d_min_expira_o",
        "label": "d_min_expiração",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-30",
        "notes": "Diâmetro mínimo VCI em expiração"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "VASC-0008": {
    "displayName": "Portal Vein Congestion Index",
    "category": "A - Vascular",
    "subcategory": "A4 - Veias",
    "categoryCode": "A",
    "subareaCode": "A4",
    "functionName": "calculate_portal_vein_congestion_index",
    "tags": [
      "#veia-porta",
      "#congestão",
      "#hipertensão-portal",
      "#doppler",
      "#índice"
    ],
    "synonyms": [
      "Congestion index",
      "portal vein pulsatility"
    ],
    "searchTerms": [
      "portal vein congestion",
      "portal vein pulsatility",
      "congestion index doppler",
      "portal hypertension",
      "hepatic congestion"
    ],
    "qaChecks": [
      "Alertar se CI < 0 ou > 1 (erro matemático)",
      "Validar fluxo hepatopetal (não hepatofugal)",
      "Verificar se medições em veia porta proximal",
      "Alertar se V_max < 10 cm/s (possível fluxo lento/reverso)",
      "Validar ângulo Doppler <60°"
    ],
    "evidence": {
      "primary_source": "Bolondi L et al. Ultrasonographic study portal venous system. Gastroenterology. 1988;95(3):714-720.",
      "radiopaedia_link": "https://radiopaedia.org/articles/portal-hypertension",
      "notes": "Índice para avaliação hipertensão portal. Complementa avaliação clínica.",
      "evidence_notes": "Fonte primária: Bolondi L et al (Gastroenterology 1988). Índice para avaliação hipertensão portal."
    },
    "inputs": [
      {
        "key": "v_max_portal",
        "label": "V_max_portal",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-50",
        "notes": "Velocidade máxima veia porta (pico sistólico)"
      },
      {
        "key": "v_min_portal",
        "label": "V_min_portal",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-50",
        "notes": "Velocidade mínima veia porta (pico diastólico)"
      }
    ],
    "outputUnits": [
      "ratio",
      "%"
    ]
  },
  "VASC-0009": {
    "displayName": "ECST Criteria",
    "category": "A - Vascular",
    "subcategory": "A1 - Carótidas/Vertebrais",
    "categoryCode": "A",
    "subareaCode": "A1",
    "functionName": "calculate_ecst_stenosis",
    "tags": [
      "#estenose",
      "#carótida",
      "#diâmetro",
      "#classificação",
      "#ECST"
    ],
    "synonyms": [
      "European Carotid Surgery Trial"
    ],
    "searchTerms": [
      "ECST criteria",
      "European carotid surgery trial",
      "carotid stenosis ECST",
      "diameter stenosis formula",
      "carotid classification"
    ],
    "qaChecks": [
      "Alertar se stenosis_percent_ecst > 100 (erro)",
      "Alertar se d_estenose == d_proximal (sem estenose)",
      "Validar medições em mesmo plano",
      "Verificar se medições evitam trombo mural",
      "Notar que ECST ~10% maior que NASCET"
    ],
    "evidence": {
      "primary_source": "European Carotid Surgery Trial. Lancet. 1991;337(8752):1235-1243.",
      "radiopaedia_link": "https://radiopaedia.org/articles/ecst-criteria",
      "notes": "Alternativa NASCET; valores ECST ~10% maiores. Menos usado que NASCET atualmente.",
      "evidence_notes": "Fonte primária: Lancet 1991. Alternativa NASCET com valores ~10% maiores."
    },
    "inputs": [
      {
        "key": "d_estenose",
        "label": "d_estenose",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Diâmetro mínimo na estenose"
      },
      {
        "key": "d_proximal",
        "label": "d_proximal",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-10",
        "notes": "Diâmetro normal proximal (CCA)"
      }
    ],
    "outputUnits": [
      "%"
    ]
  },
  "VASC-0010": {
    "displayName": "Mesenteric Artery Stenosis Doppler",
    "category": "A - Vascular",
    "subcategory": "A3 - Artérias Mesentéricas",
    "categoryCode": "A",
    "subareaCode": "A3",
    "functionName": "calculate_mesenteric_stenosis_doppler",
    "tags": [
      "#estenose",
      "#mesentérica",
      "#doppler",
      "#SMA",
      "#critério"
    ],
    "synonyms": [
      "Mesenteric ischemia",
      "celiac artery",
      "SMA"
    ],
    "searchTerms": [
      "mesenteric artery stenosis",
      "SMA stenosis doppler",
      "celiac artery stenosis",
      "mesenteric ischemia",
      "superior mesenteric artery"
    ],
    "qaChecks": [
      "Alertar se PSV_SMA < 50 cm/s (possível erro ou hipoperfusão)",
      "Validar ângulo Doppler <60°",
      "Verificar se medições em segmento proximal",
      "Alertar se gases intestinais limitam visualização",
      "Confirmar jejum do paciente",
      "Considerar débito cardíaco baixo (afeta PSV)"
    ],
    "evidence": {
      "primary_source": "Moneta GL et al. Screening for asymptomatic SMA stenosis. J Vasc Surg. 1993;17(1):143-150.",
      "radiopaedia_link": "https://radiopaedia.org/articles/mesenteric-artery-stenosis",
      "notes": "Critérios Doppler para estenose mesentérica. Confirmação por CTA/MRA/angiografia recomendada.",
      "evidence_notes": "Fonte primária: Moneta GL et al (J Vasc Surg 1993). Critérios Doppler para estenose mesentérica."
    },
    "inputs": [
      {
        "key": "psv_sma",
        "label": "PSV_SMA",
        "type": "number",
        "unit": "cm/s",
        "required": true,
        "validRange": "0-400",
        "notes": "PSV artéria mesentérica superior"
      },
      {
        "key": "psv_celiaca",
        "label": "PSV_celiaca",
        "type": "number",
        "unit": "number",
        "required": false,
        "validRange": "0-300",
        "notes": "PSV artéria celíaca (opcional)"
      }
    ]
  },
  "VASC-0011": {
    "displayName": "Carotid Intima-Media Thickness",
    "category": "A - Vascular",
    "subcategory": "A1 - Carótidas/Vertebrais",
    "categoryCode": "A",
    "subareaCode": "A1",
    "functionName": "measure_carotid_intima_media_thickness",
    "tags": [
      "#aterosclerose",
      "#carótida",
      "#IMT",
      "#espessura",
      "#marcador"
    ],
    "synonyms": [
      "IMT",
      "carotid IMT",
      "atherosclerosis marker"
    ],
    "searchTerms": [
      "intima-media thickness",
      "carotid IMT",
      "atherosclerosis marker",
      "carotid ultrasound",
      "IMT measurement"
    ],
    "qaChecks": [
      "Alertar se imt < 0.3 mm (possível erro)",
      "Alertar se imt > 2.0 mm (possível erro ou placa)",
      "Validar medição parede posterior",
      "Verificar se 1 cm antes bifurcação",
      "Alertar se placa presente (não é IMT puro)"
    ],
    "evidence": {
      "primary_source": "Bots ML et al. Common carotid intima-media thickness. Stroke. 1997;28(10):1877-1882.",
      "radiopaedia_link": "https://radiopaedia.org/articles/carotid-intima-media-thickness",
      "notes": "Marcador de aterosclerose subclínica. IMT >0.9 mm = risco cardiovascular aumentado.",
      "evidence_notes": "Fonte primária: Bots ML et al (Stroke 1997). Marcador de aterosclerose subclínica."
    },
    "inputs": [
      {
        "key": "imt_mm",
        "label": "imt_mm",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-3",
        "notes": "Espessura íntima-média carotídea"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  },
  "VASC-0012": {
    "displayName": "Deep Vein Thrombosis Compression",
    "category": "A - Vascular",
    "subcategory": "A4 - Veias",
    "categoryCode": "A",
    "subareaCode": "A4",
    "functionName": "diagnose_dvt_compression_criteria",
    "tags": [
      "#trombose",
      "#veia",
      "#compressibilidade",
      "#TVP",
      "#ultrassom"
    ],
    "synonyms": [
      "DVT",
      "compressibility criteria",
      "venous thrombosis"
    ],
    "searchTerms": [
      "deep vein thrombosis",
      "DVT compression ultrasound",
      "venous thrombosis",
      "compressibility criteria",
      "DVT diagnosis"
    ],
    "qaChecks": [
      "Validar compressibilidade adequada",
      "Verificar se comparação com lado contralateral",
      "Alertar se TVP recanalizada (pode parecer compressível)",
      "Considerar edema/cicatrizes que podem limitar compressão",
      "Documentar localização exata (se TVP)"
    ],
    "evidence": {
      "primary_source": "Kearon C et al. Antithrombotic therapy VTE disease. Chest. 2012;141(2 Suppl):e419S-e494S.",
      "radiopaedia_link": "https://radiopaedia.org/articles/deep-vein-thrombosis",
      "notes": "Critério compressibilidade para TVP. Sensibilidade/especificidade >95%.",
      "evidence_notes": "Fonte primária: Kearon C et al (Chest 2012). Critério compressibilidade para TVP."
    },
    "inputs": [
      {
        "key": "compressibilidade",
        "label": "compressibilidade",
        "type": "enum",
        "required": true,
        "notes": "Veia comprime com transdutor?"
      },
      {
        "key": "lado_contralateral",
        "label": "lado_contralateral",
        "type": "enum",
        "required": true,
        "notes": "Lado contralateral normal?"
      }
    ]
  },
  "VASC-0013": {
    "displayName": "Ankle-Brachial Index",
    "category": "A - Vascular",
    "subcategory": "A3 - Artérias Periféricas",
    "categoryCode": "A",
    "subareaCode": "A3",
    "functionName": "calculate_ankle_brachial_index",
    "tags": [
      "#doença-arterial-periférica",
      "#pressão",
      "#ABI",
      "#índice"
    ],
    "synonyms": [
      "ABI",
      "ankle brachial pressure index"
    ],
    "searchTerms": [
      "ankle brachial index",
      "ABI peripheral artery disease",
      "ankle brachial pressure",
      "ABI measurement",
      "PAD screening"
    ],
    "qaChecks": [
      "Alertar se abi < 0.5 (possível erro ou oclusão crítica)",
      "Alertar se abi > 1.3 (possível calcificação arterial; falso elevado)",
      "Validar medições em repouso",
      "Comparar bilateral para assimetria",
      "Considerar calcificação em diabetes (ABI falsamente elevado)"
    ],
    "evidence": {
      "primary_source": "Hirsch AT et al. ACC/AHA Guidelines PAD. Circulation. 2006;113(11):e463-e654.",
      "radiopaedia_link": "https://radiopaedia.org/articles/ankle-brachial-index",
      "notes": "Índice padrão para PAD. ABI <0.9 sugere estenose ≥50%.",
      "evidence_notes": "Fonte primária: Hirsch AT et al (Circulation 2006). Índice padrão para PAD."
    },
    "inputs": [
      {
        "key": "p_tornozelo",
        "label": "P_tornozelo",
        "type": "number",
        "unit": "mmHg",
        "required": true,
        "validRange": "0-300",
        "notes": "Pressão sistólica tornozelo (máxima)"
      },
      {
        "key": "p_braquial",
        "label": "P_braquial",
        "type": "number",
        "unit": "mmHg",
        "required": true,
        "validRange": "0-300",
        "notes": "Pressão sistólica braquial (máxima)"
      }
    ],
    "outputUnits": [
      "ratio"
    ]
  },
  "VASC-0014": {
    "displayName": "Aortic Diameter Measurement",
    "category": "A - Vascular",
    "subcategory": "A2 - Aorta",
    "categoryCode": "A",
    "subareaCode": "A2",
    "functionName": "measure_aortic_diameter",
    "tags": [
      "#aorta",
      "#diâmetro",
      "#medição",
      "#aneurisma",
      "#aortic-root"
    ],
    "synonyms": [
      "Aortic diameter",
      "aorta size",
      "aortic root"
    ],
    "searchTerms": [
      "aortic diameter",
      "aorta measurement",
      "aortic root diameter",
      "ascending aorta",
      "aortic aneurysm diameter"
    ],
    "qaChecks": [
      "Alertar se d_aorta < 10 mm (possível erro)",
      "Alertar se d_aorta > 100 mm (possível erro)",
      "Validar medição no eixo transversal",
      "Verificar se evita trombo mural",
      "Documentar localização exata"
    ],
    "evidence": {
      "primary_source": "Hiratzka LF et al. 2010 ACCF/AHA Guidelines Aorta. Circulation. 2010;121(13):e266-e369.",
      "radiopaedia_link": "https://radiopaedia.org/articles/abdominal-aortic-aneurysm",
      "notes": "Medições seriadas para avaliar crescimento. Cirurgia indicada se >55 mm ou crescimento rápido.",
      "evidence_notes": "Fonte primária: Hiratzka LF et al (Circulation 2010). Diretrizes ACC/AHA para medição aórtica."
    },
    "inputs": [
      {
        "key": "d_aorta",
        "label": "d_aorta",
        "type": "number",
        "unit": "mm",
        "required": true,
        "validRange": "0-100",
        "notes": "Diâmetro máximo aorta"
      },
      {
        "key": "localizacao",
        "label": "localizacao",
        "type": "enum",
        "required": true,
        "notes": "Localização medição"
      }
    ],
    "outputUnits": [
      "mm"
    ]
  }
} as const satisfies Record<FormulaId, FormulaMeta>;

export type FormulaInputsById = {
  [K in FormulaId]: z.infer<(typeof FormulaInputSchemaMap)[K]>;
};
